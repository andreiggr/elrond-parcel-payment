{"id":"node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","dependencies":[{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js.map","includedInParent":true,"mtime":1647170305205},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/package.json","includedInParent":true,"mtime":1647174146392},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/package.json","includedInParent":true,"mtime":1647170304850},{"name":"../address","loc":{"line":4,"column":26,"index":198},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/address.js"},{"name":"../balance","loc":{"line":5,"column":26,"index":239},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/balance.js"},{"name":"../hash","loc":{"line":6,"column":23,"index":277},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/hash.js"},{"name":"../networkParams","loc":{"line":7,"column":32,"index":321},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/networkParams.js"},{"name":"../nonce","loc":{"line":8,"column":24,"index":366},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/nonce.js"},{"name":"../transaction","loc":{"line":9,"column":30,"index":409},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/transaction.js"},{"name":"./argSerializer","loc":{"line":10,"column":32,"index":460},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/argSerializer.js"},{"name":"./returnCode","loc":{"line":11,"column":29,"index":509},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/returnCode.js"},{"name":"./result","loc":{"line":12,"column":25,"index":551},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/smartContractResults.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/result.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedResult = exports.SmartContractResultItem = exports.SmartContractResults = void 0;\nconst address_1 = require(\"../address\");\nconst balance_1 = require(\"../balance\");\nconst hash_1 = require(\"../hash\");\nconst networkParams_1 = require(\"../networkParams\");\nconst nonce_1 = require(\"../nonce\");\nconst transaction_1 = require(\"../transaction\");\nconst argSerializer_1 = require(\"./argSerializer\");\nconst returnCode_1 = require(\"./returnCode\");\nconst result_1 = require(\"./result\");\nclass SmartContractResults {\n    constructor(items) {\n        this.items = [];\n        this.immediate = new TypedResult();\n        this.resultingCalls = [];\n        this.items = items;\n        if (this.items.length > 0) {\n            let immediateResult = this.findImmediateResult();\n            if (immediateResult) {\n                this.immediate = immediateResult;\n            }\n            this.resultingCalls = this.findResultingCalls();\n        }\n    }\n    static empty() {\n        return new SmartContractResults([]);\n    }\n    static fromHttpResponse(smartContractResults) {\n        let items = (smartContractResults || []).map((item) => SmartContractResultItem.fromHttpResponse(item));\n        return new SmartContractResults(items);\n    }\n    findImmediateResult() {\n        let immediateItem = this.items.filter(item => isImmediateResult(item))[0];\n        if (immediateItem) {\n            return new TypedResult(immediateItem);\n        }\n        return undefined;\n    }\n    findResultingCalls() {\n        let otherItems = this.items.filter(item => !isImmediateResult(item));\n        let resultingCalls = otherItems.map(item => new TypedResult(item));\n        return resultingCalls;\n    }\n    getImmediate() {\n        return this.immediate;\n    }\n    getResultingCalls() {\n        return this.resultingCalls;\n    }\n    getAllResults() {\n        return this.items.map(item => new TypedResult(item));\n    }\n}\nexports.SmartContractResults = SmartContractResults;\nfunction isImmediateResult(item) {\n    return item.nonce.valueOf() != 0;\n}\nclass SmartContractResultItem {\n    constructor() {\n        this.hash = hash_1.Hash.empty();\n        this.nonce = new nonce_1.Nonce(0);\n        this.value = balance_1.Balance.Zero();\n        this.receiver = new address_1.Address();\n        this.sender = new address_1.Address();\n        this.data = \"\";\n        this.previousHash = hash_1.Hash.empty();\n        this.originalHash = hash_1.Hash.empty();\n        this.gasLimit = new networkParams_1.GasLimit(0);\n        this.gasPrice = new networkParams_1.GasPrice(0);\n        this.callType = 0;\n        this.returnMessage = \"\";\n    }\n    static fromHttpResponse(response) {\n        let item = new SmartContractResultItem();\n        item.hash = new transaction_1.TransactionHash(response.hash);\n        item.nonce = new nonce_1.Nonce(response.nonce || 0);\n        item.value = balance_1.Balance.fromString(response.value);\n        item.receiver = new address_1.Address(response.receiver);\n        item.sender = new address_1.Address(response.sender);\n        item.data = response.data || \"\";\n        item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n        item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n        item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n        item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n        item.callType = response.callType;\n        item.returnMessage = response.returnMessage;\n        return item;\n    }\n    getDataTokens() {\n        return new argSerializer_1.ArgSerializer().stringToBuffers(this.data);\n    }\n}\nexports.SmartContractResultItem = SmartContractResultItem;\nclass TypedResult extends SmartContractResultItem {\n    constructor(init) {\n        super();\n        Object.assign(this, init);\n    }\n    assertSuccess() {\n        result_1.Result.assertSuccess(this);\n    }\n    isSuccess() {\n        return this.getReturnCode().isSuccess();\n    }\n    getReturnCode() {\n        let tokens = this.getDataTokens();\n        if (tokens.length < 2) {\n            return returnCode_1.ReturnCode.None;\n        }\n        let returnCodeToken = tokens[1];\n        return returnCode_1.ReturnCode.fromBuffer(returnCodeToken);\n    }\n    outputUntyped() {\n        this.assertSuccess();\n        // Skip the first 2 SCRs (eg. the @6f6b from @6f6b@2b).\n        return this.getDataTokens().slice(2);\n    }\n    setEndpointDefinition(endpointDefinition) {\n        this.endpointDefinition = endpointDefinition;\n    }\n    getEndpointDefinition() {\n        return this.endpointDefinition;\n    }\n    getReturnMessage() {\n        return this.returnMessage;\n    }\n    outputTyped() {\n        return result_1.Result.outputTyped(this);\n    }\n    unpackOutput() {\n        return result_1.Result.unpackOutput(this);\n    }\n}\nexports.TypedResult = TypedResult;\n"},"sourceMaps":{"js":{"version":3,"file":"smartContractResults.js","sourceRoot":"","sources":["../../src/smartcontracts/smartContractResults.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"e54906b813d22ec2714d7d718ca053c2","cacheData":{"env":{}}}