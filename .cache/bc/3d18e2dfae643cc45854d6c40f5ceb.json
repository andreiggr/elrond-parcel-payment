{"id":"node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","dependencies":[{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js.map","includedInParent":true,"mtime":1647170304897},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/package.json","includedInParent":true,"mtime":1647174146392},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/package.json","includedInParent":true,"mtime":1647170304850},{"name":"../../errors","loc":{"line":23,"column":36,"index":1035},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/errors.js"},{"name":"../typesystem","loc":{"line":24,"column":29,"index":1082},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/typesystem/index.js"},{"name":"../../utils","loc":{"line":25,"column":24,"index":1124},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/utils.js"},{"name":"./option","loc":{"line":26,"column":25,"index":1165},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/option.js"},{"name":"./primitive","loc":{"line":27,"column":28,"index":1206},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/primitive.js"},{"name":"./list","loc":{"line":28,"column":23,"index":1245},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/list.js"},{"name":"./struct","loc":{"line":29,"column":25,"index":1281},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/struct.js"},{"name":"./enum","loc":{"line":30,"column":23,"index":1317},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/enum.js"},{"name":"./tuple","loc":{"line":31,"column":24,"index":1352},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/binary.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/smartcontracts/codec/tuple.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BinaryCodecConstraints = exports.BinaryCodec = void 0;\nconst errors = __importStar(require(\"../../errors\"));\nconst typesystem_1 = require(\"../typesystem\");\nconst utils_1 = require(\"../../utils\");\nconst option_1 = require(\"./option\");\nconst primitive_1 = require(\"./primitive\");\nconst list_1 = require(\"./list\");\nconst struct_1 = require(\"./struct\");\nconst enum_1 = require(\"./enum\");\nconst tuple_1 = require(\"./tuple\");\nclass BinaryCodec {\n    constructor(constraints = null) {\n        this.constraints = constraints || new BinaryCodecConstraints();\n        this.optionCodec = new option_1.OptionValueBinaryCodec(this);\n        this.listCodec = new list_1.ListBinaryCodec(this);\n        this.primitiveCodec = new primitive_1.PrimitiveBinaryCodec(this);\n        this.structCodec = new struct_1.StructBinaryCodec(this);\n        this.tupleCodec = new tuple_1.TupleBinaryCodec(this);\n        this.enumCodec = new enum_1.EnumBinaryCodec(this);\n    }\n    decodeTopLevel(buffer, type) {\n        this.constraints.checkBufferLength(buffer);\n        let typedValue = typesystem_1.onTypeSelect(type, {\n            onOption: () => this.optionCodec.decodeTopLevel(buffer, type.getFirstTypeParameter()),\n            onList: () => this.listCodec.decodeTopLevel(buffer, type),\n            onPrimitive: () => this.primitiveCodec.decodeTopLevel(buffer, type),\n            onStruct: () => this.structCodec.decodeTopLevel(buffer, type),\n            onTuple: () => this.tupleCodec.decodeTopLevel(buffer, type),\n            onEnum: () => this.enumCodec.decodeTopLevel(buffer, type),\n        });\n        return typedValue;\n    }\n    decodeNested(buffer, type) {\n        this.constraints.checkBufferLength(buffer);\n        let [typedResult, decodedLength] = typesystem_1.onTypeSelect(type, {\n            onOption: () => this.optionCodec.decodeNested(buffer, type.getFirstTypeParameter()),\n            onList: () => this.listCodec.decodeNested(buffer, type),\n            onPrimitive: () => this.primitiveCodec.decodeNested(buffer, type),\n            onStruct: () => this.structCodec.decodeNested(buffer, type),\n            onTuple: () => this.tupleCodec.decodeNested(buffer, type),\n            onEnum: () => this.enumCodec.decodeNested(buffer, type),\n        });\n        return [typedResult, decodedLength];\n    }\n    encodeNested(typedValue) {\n        utils_1.guardTrue(typedValue\n            .getType()\n            .getCardinality()\n            .isSingular(), \"singular cardinality, thus encodable type\");\n        return typesystem_1.onTypedValueSelect(typedValue, {\n            onPrimitive: () => this.primitiveCodec.encodeNested(typedValue),\n            onOption: () => this.optionCodec.encodeNested(typedValue),\n            onList: () => this.listCodec.encodeNested(typedValue),\n            onStruct: () => this.structCodec.encodeNested(typedValue),\n            onTuple: () => this.tupleCodec.encodeNested(typedValue),\n            onEnum: () => this.enumCodec.encodeNested(typedValue),\n        });\n    }\n    encodeTopLevel(typedValue) {\n        utils_1.guardType(\"value\", typesystem_1.TypedValue, typedValue, false);\n        utils_1.guardTrue(typedValue\n            .getType()\n            .getCardinality()\n            .isSingular(), \"singular cardinality, thus encodable type\");\n        return typesystem_1.onTypedValueSelect(typedValue, {\n            onPrimitive: () => this.primitiveCodec.encodeTopLevel(typedValue),\n            onOption: () => this.optionCodec.encodeTopLevel(typedValue),\n            onList: () => this.listCodec.encodeTopLevel(typedValue),\n            onStruct: () => this.structCodec.encodeTopLevel(typedValue),\n            onTuple: () => this.tupleCodec.encodeTopLevel(typedValue),\n            onEnum: () => this.enumCodec.encodeTopLevel(typedValue),\n        });\n    }\n}\nexports.BinaryCodec = BinaryCodec;\nclass BinaryCodecConstraints {\n    constructor(init) {\n        this.maxBufferLength = (init === null || init === void 0 ? void 0 : init.maxBufferLength) || 4096;\n        this.maxListLength = (init === null || init === void 0 ? void 0 : init.maxListLength) || 1024;\n    }\n    checkBufferLength(buffer) {\n        if (buffer.length > this.maxBufferLength) {\n            throw new errors.ErrCodec(`Buffer too large: ${buffer.length} > ${this.maxBufferLength}`);\n        }\n    }\n    /**\n     * This constraint avoids computer-freezing decode bugs (e.g. due to invalid ABI or struct definitions).\n     */\n    checkListLength(length) {\n        if (length > this.maxListLength) {\n            throw new errors.ErrCodec(`List too large: ${length} > ${this.maxListLength}`);\n        }\n    }\n}\nexports.BinaryCodecConstraints = BinaryCodecConstraints;\n"},"sourceMaps":{"js":{"version":3,"file":"binary.js","sourceRoot":"","sources":["../../../src/smartcontracts/codec/binary.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"4609b72820d2dc761c47c6667b7af831","cacheData":{"env":{}}}