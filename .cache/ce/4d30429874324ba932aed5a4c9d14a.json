{"id":"RSlH","dependencies":[{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js.map","includedInParent":true,"mtime":1647170302843},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/package.json","includedInParent":true,"mtime":1647174146392},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/package.json","includedInParent":true,"mtime":1647170302817},{"name":"@ledgerhq/hw-transport","loc":{"line":1,"column":22,"index":22},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport/lib-es/Transport.js"},{"name":"@ledgerhq/devices/lib/hid-framing","loc":{"line":2,"column":23,"index":71},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/devices/lib/hid-framing.js"},{"name":"@ledgerhq/devices","loc":{"line":3,"column":37,"index":145},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/devices/lib-es/index.js"},{"name":"@ledgerhq/logs","loc":{"line":4,"column":20,"index":186},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/logs/lib-es/index.js"},{"name":"@ledgerhq/errors","loc":{"line":5,"column":162,"index":366},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/errors/dist/index.js"},{"name":"./webusb","loc":{"line":6,"column":89,"index":475},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/webusb.js"},{"name":"buffer","parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=a(require(\"@ledgerhq/hw-transport\")),i=a(require(\"@ledgerhq/devices/lib/hid-framing\")),r=require(\"@ledgerhq/devices\"),n=require(\"@ledgerhq/logs\"),s=require(\"@ledgerhq/errors\"),c=require(\"./webusb\");function a(e){return e&&e.__esModule?e:{default:e}}const o=1,d=3;class u extends t.default{constructor(t,c){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.interfaceNumber=void 0,this._disconnectEmitted=!1,this._emitDisconnect=(e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit(\"disconnect\",e))}),this.exchange=(t=>this.exchangeAtomicImpl(async()=>{const{channel:r,packetSize:s}=this;(0,n.log)(\"apdu\",\"=> \"+t.toString(\"hex\"));const c=(0,i.default)(r,s),a=c.makeBlocks(t);for(let e=0;e<a.length;e++)await this.device.transferOut(d,a[e]);let o,u;for(;!(o=c.getReducedResult(u));){const t=await this.device.transferIn(d,s),i=e.from(t.data.buffer);u=c.reduceResponse(u,i)}return(0,n.log)(\"apdu\",\"<= \"+o.toString(\"hex\")),o}).catch(e=>{if(e&&e.message&&e.message.includes(\"disconnected\"))throw this._emitDisconnect(e),new s.DisconnectedDeviceDuringOperation(e.message);throw e})),this.device=t,this.interfaceNumber=c,this.deviceModel=(0,r.identifyUSBProductId)(t.productId)}static async request(){const e=await(0,c.requestLedgerDevice)();return u.open(e)}static async openConnected(){const e=await(0,c.getLedgerDevices)();return 0===e.length?null:u.open(e[0])}static async open(e){await e.open(),null===e.configuration&&await e.selectConfiguration(o),await e.reset();const t=e.configurations[0].interfaces.find(({alternates:e})=>e.some(e=>255===e.interfaceClass));if(!t)throw new s.TransportInterfaceNotAvailable(\"No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.\");const i=t.interfaceNumber;try{await e.claimInterface(i)}catch(c){throw await e.close(),new s.TransportInterfaceNotAvailable(c.message)}const r=new u(e,i),n=t=>{e===t.device&&(navigator.usb.removeEventListener(\"disconnect\",n),r._emitDisconnect(new s.DisconnectedDevice))};return navigator.usb.addEventListener(\"disconnect\",n),r}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await this.device.reset(),await this.device.close()}setScrambleKey(){}}exports.default=u,u.isSupported=c.isSupported,u.list=c.getLedgerDevices,u.listen=(e=>{let t=!1;return(0,c.getFirstLedgerDevice)().then(i=>{if(!t){const t=(0,r.identifyUSBProductId)(i.productId);e.next({type:\"add\",descriptor:i,deviceModel:t}),e.complete()}},t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new s.TransportWebUSBGestureRequired(t.message)):e.error(new s.TransportOpenUserCancelled(t.message))}),{unsubscribe:function(){t=!0}}});"},"sourceMaps":{"js":{"mappings":[{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":0}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":4}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":6}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":14}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":24}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":31}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":38}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":53}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":61}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":74}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":75}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":82}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":86}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":94}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":107}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":109}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":113}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":115}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":117}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":2,"column":0},"generated":{"line":2,"column":125}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":8,"column":0},"generated":{"line":2,"column":152}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":8,"column":0},"generated":{"line":2,"column":154}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":8,"column":0},"generated":{"line":2,"column":156}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":8,"column":0},"generated":{"line":2,"column":164}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":9,"column":0},"generated":{"line":2,"column":202}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":9,"column":0},"generated":{"line":2,"column":204}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":9,"column":0},"generated":{"line":2,"column":212}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":11,"column":0},"generated":{"line":2,"column":233}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":11,"column":0},"generated":{"line":2,"column":235}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":11,"column":0},"generated":{"line":2,"column":243}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":12,"column":0},"generated":{"line":2,"column":261}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":12,"column":0},"generated":{"line":2,"column":263}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":12,"column":0},"generated":{"line":2,"column":271}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":291}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":293}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":19,"column":0},"generated":{"line":2,"column":301}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":313}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":322}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":324}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":327}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":334}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":337}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":339}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":350}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":352}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":353}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":361}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":26,"column":0},"generated":{"line":2,"column":364}},{"source":"../src/TransportWebUSB.js","name":"configurationValue","original":{"line":26,"column":6},"generated":{"line":2,"column":370}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":26,"column":27},"generated":{"line":2,"column":372}},{"source":"../src/TransportWebUSB.js","name":"endpointNumber","original":{"line":27,"column":6},"generated":{"line":2,"column":374}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":27,"column":23},"generated":{"line":2,"column":376}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":36,"column":15},"generated":{"line":2,"column":378}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":384}},{"source":"../src/TransportWebUSB.js","name":"Transport","original":{"line":36,"column":45},"generated":{"line":2,"column":394}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":36,"column":15},"generated":{"line":2,"column":396}},{"source":"../src/TransportWebUSB.js","name":"constructor","original":{"line":43,"column":2},"generated":{"line":2,"column":404}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":43,"column":14},"generated":{"line":2,"column":416}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":43,"column":33},"generated":{"line":2,"column":418}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":44,"column":4},"generated":{"line":2,"column":421}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":37,"column":2},"generated":{"line":2,"column":429}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":37,"column":2},"generated":{"line":2,"column":434}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":43,"column":58},"generated":{"line":2,"column":446}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":38,"column":2},"generated":{"line":2,"column":448}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":38,"column":2},"generated":{"line":2,"column":453}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":43,"column":58},"generated":{"line":2,"column":470}},{"source":"../src/TransportWebUSB.js","name":"channel","original":{"line":39,"column":2},"generated":{"line":2,"column":472}},{"source":"../src/TransportWebUSB.js","name":"channel","original":{"line":39,"column":2},"generated":{"line":2,"column":477}},{"source":"../src/TransportWebUSB.js","name":"Math","original":{"line":39,"column":12},"generated":{"line":2,"column":485}},{"source":"../src/TransportWebUSB.js","name":"floor","original":{"line":39,"column":17},"generated":{"line":2,"column":490}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":39,"column":39},"generated":{"line":2,"column":496}},{"source":"../src/TransportWebUSB.js","name":"Math","original":{"line":39,"column":23},"generated":{"line":2,"column":502}},{"source":"../src/TransportWebUSB.js","name":"random","original":{"line":39,"column":28},"generated":{"line":2,"column":507}},{"source":"../src/TransportWebUSB.js","name":"packetSize","original":{"line":40,"column":2},"generated":{"line":2,"column":517}},{"source":"../src/TransportWebUSB.js","name":"packetSize","original":{"line":40,"column":2},"generated":{"line":2,"column":522}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":40,"column":15},"generated":{"line":2,"column":533}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":41,"column":2},"generated":{"line":2,"column":536}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":41,"column":2},"generated":{"line":2,"column":541}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":43,"column":58},"generated":{"line":2,"column":562}},{"source":"../src/TransportWebUSB.js","name":"_disconnectEmitted","original":{"line":150,"column":2},"generated":{"line":2,"column":564}},{"source":"../src/TransportWebUSB.js","name":"_disconnectEmitted","original":{"line":150,"column":2},"generated":{"line":2,"column":569}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":150,"column":23},"generated":{"line":2,"column":589}},{"source":"../src/TransportWebUSB.js","name":"_emitDisconnect","original":{"line":151,"column":2},"generated":{"line":2,"column":591}},{"source":"../src/TransportWebUSB.js","name":"_emitDisconnect","original":{"line":151,"column":2},"generated":{"line":2,"column":596}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":151,"column":21},"generated":{"line":2,"column":612}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":151,"column":21},"generated":{"line":2,"column":613}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":152,"column":8},"generated":{"line":2,"column":617}},{"source":"../src/TransportWebUSB.js","name":"_disconnectEmitted","original":{"line":152,"column":13},"generated":{"line":2,"column":622}},{"source":"../src/TransportWebUSB.js","name":"_disconnectEmitted","original":{"line":153,"column":9},"generated":{"line":2,"column":643}},{"source":"../src/TransportWebUSB.js","name":"_disconnectEmitted","original":{"line":153,"column":9},"generated":{"line":2,"column":648}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":153,"column":30},"generated":{"line":2,"column":668}},{"source":"../src/TransportWebUSB.js","name":"emit","original":{"line":154,"column":9},"generated":{"line":2,"column":670}},{"source":"../src/TransportWebUSB.js","name":"emit","original":{"line":154,"column":9},"generated":{"line":2,"column":675}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":154,"column":14},"generated":{"line":2,"column":680}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":154,"column":28},"generated":{"line":2,"column":693}},{"source":"../src/TransportWebUSB.js","name":"exchange","original":{"line":172,"column":2},"generated":{"line":2,"column":699}},{"source":"../src/TransportWebUSB.js","name":"exchange","original":{"line":172,"column":2},"generated":{"line":2,"column":704}},{"source":"../src/TransportWebUSB.js","name":"apdu","original":{"line":172,"column":14},"generated":{"line":2,"column":713}},{"source":"../src/TransportWebUSB.js","name":"apdu","original":{"line":172,"column":14},"generated":{"line":2,"column":714}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":173,"column":4},"generated":{"line":2,"column":717}},{"source":"../src/TransportWebUSB.js","name":"exchangeAtomicImpl","original":{"line":173,"column":9},"generated":{"line":2,"column":722}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":173,"column":28},"generated":{"line":2,"column":741}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":174,"column":12},"generated":{"line":2,"column":751}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":174,"column":12},"generated":{"line":2,"column":757}},{"source":"../src/TransportWebUSB.js","name":"channel","original":{"line":174,"column":14},"generated":{"line":2,"column":765}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":174,"column":12},"generated":{"line":2,"column":767}},{"source":"../src/TransportWebUSB.js","name":"packetSize","original":{"line":174,"column":23},"generated":{"line":2,"column":778}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":174,"column":38},"generated":{"line":2,"column":781}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":175,"column":10},"generated":{"line":2,"column":787}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":175,"column":10},"generated":{"line":2,"column":789}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":175,"column":10},"generated":{"line":2,"column":791}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":175,"column":10},"generated":{"line":2,"column":796}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":175,"column":18},"generated":{"line":2,"column":803}},{"source":"../src/TransportWebUSB.js","name":"apdu","original":{"line":175,"column":26},"generated":{"line":2,"column":809}},{"source":"../src/TransportWebUSB.js","name":"toString","original":{"line":175,"column":31},"generated":{"line":2,"column":811}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":175,"column":40},"generated":{"line":2,"column":820}},{"source":"../src/TransportWebUSB.js","name":"framing","original":{"line":177,"column":12},"generated":{"line":2,"column":828}},{"source":"../src/TransportWebUSB.js","name":"framing","original":{"line":177,"column":12},"generated":{"line":2,"column":834}},{"source":"../src/TransportWebUSB.js","name":"hidFraming","original":{"line":177,"column":22},"generated":{"line":2,"column":837}},{"source":"../src/TransportWebUSB.js","name":"channel","original":{"line":177,"column":33},"generated":{"line":2,"column":839}},{"source":"../src/TransportWebUSB.js","name":"channel","original":{"line":177,"column":33},"generated":{"line":2,"column":841}},{"source":"../src/TransportWebUSB.js","name":"channel","original":{"line":177,"column":33},"generated":{"line":2,"column":850}},{"source":"../src/TransportWebUSB.js","name":"packetSize","original":{"line":177,"column":42},"generated":{"line":2,"column":852}},{"source":"../src/TransportWebUSB.js","name":"blocks","original":{"line":180,"column":12},"generated":{"line":2,"column":855}},{"source":"../src/TransportWebUSB.js","name":"framing","original":{"line":180,"column":21},"generated":{"line":2,"column":857}},{"source":"../src/TransportWebUSB.js","name":"makeBlocks","original":{"line":180,"column":29},"generated":{"line":2,"column":859}},{"source":"../src/TransportWebUSB.js","name":"apdu","original":{"line":180,"column":40},"generated":{"line":2,"column":870}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":181,"column":11},"generated":{"line":2,"column":873}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":181,"column":11},"generated":{"line":2,"column":877}},{"source":"../src/TransportWebUSB.js","name":"i","original":{"line":181,"column":15},"generated":{"line":2,"column":881}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":181,"column":19},"generated":{"line":2,"column":883}},{"source":"../src/TransportWebUSB.js","name":"i","original":{"line":181,"column":22},"generated":{"line":2,"column":885}},{"source":"../src/TransportWebUSB.js","name":"blocks","original":{"line":181,"column":26},"generated":{"line":2,"column":887}},{"source":"../src/TransportWebUSB.js","name":"length","original":{"line":181,"column":33},"generated":{"line":2,"column":889}},{"source":"../src/TransportWebUSB.js","name":"i","original":{"line":181,"column":41},"generated":{"line":2,"column":896}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":182,"column":14},"generated":{"line":2,"column":906}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":182,"column":19},"generated":{"line":2,"column":911}},{"source":"../src/TransportWebUSB.js","name":"transferOut","original":{"line":182,"column":26},"generated":{"line":2,"column":918}},{"source":"../src/TransportWebUSB.js","name":"endpointNumber","original":{"line":182,"column":38},"generated":{"line":2,"column":930}},{"source":"../src/TransportWebUSB.js","name":"blocks","original":{"line":182,"column":54},"generated":{"line":2,"column":932}},{"source":"../src/TransportWebUSB.js","name":"i","original":{"line":182,"column":61},"generated":{"line":2,"column":934}},{"source":"../src/TransportWebUSB.js","name":"result","original":{"line":186,"column":10},"generated":{"line":2,"column":938}},{"source":"../src/TransportWebUSB.js","name":"result","original":{"line":186,"column":10},"generated":{"line":2,"column":942}},{"source":"../src/TransportWebUSB.js","name":"acc","original":{"line":187,"column":10},"generated":{"line":2,"column":944}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":188,"column":13},"generated":{"line":2,"column":946}},{"source":"../src/TransportWebUSB.js","name":"result","original":{"line":188,"column":15},"generated":{"line":2,"column":953}},{"source":"../src/TransportWebUSB.js","name":"framing","original":{"line":188,"column":24},"generated":{"line":2,"column":955}},{"source":"../src/TransportWebUSB.js","name":"getReducedResult","original":{"line":188,"column":32},"generated":{"line":2,"column":957}},{"source":"../src/TransportWebUSB.js","name":"acc","original":{"line":188,"column":49},"generated":{"line":2,"column":974}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":188,"column":56},"generated":{"line":2,"column":979}},{"source":"../src/TransportWebUSB.js","name":"r","original":{"line":189,"column":14},"generated":{"line":2,"column":980}},{"source":"../src/TransportWebUSB.js","name":"r","original":{"line":189,"column":14},"generated":{"line":2,"column":986}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":189,"column":24},"generated":{"line":2,"column":994}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":189,"column":29},"generated":{"line":2,"column":999}},{"source":"../src/TransportWebUSB.js","name":"transferIn","original":{"line":189,"column":36},"generated":{"line":2,"column":1006}},{"source":"../src/TransportWebUSB.js","name":"endpointNumber","original":{"line":189,"column":47},"generated":{"line":2,"column":1017}},{"source":"../src/TransportWebUSB.js","name":"packetSize","original":{"line":189,"column":63},"generated":{"line":2,"column":1019}},{"source":"../src/TransportWebUSB.js","name":"buffer","original":{"line":190,"column":14},"generated":{"line":2,"column":1022}},{"source":"../src/TransportWebUSB.js","name":"Buffer","original":{"line":190,"column":23},"generated":{"line":2,"column":1024}},{"source":"../src/TransportWebUSB.js","name":"from","original":{"line":190,"column":30},"generated":{"line":2,"column":1026}},{"source":"../src/TransportWebUSB.js","name":"r","original":{"line":190,"column":35},"generated":{"line":2,"column":1031}},{"source":"../src/TransportWebUSB.js","name":"data","original":{"line":190,"column":37},"generated":{"line":2,"column":1033}},{"source":"../src/TransportWebUSB.js","name":"buffer","original":{"line":190,"column":42},"generated":{"line":2,"column":1038}},{"source":"../src/TransportWebUSB.js","name":"acc","original":{"line":191,"column":8},"generated":{"line":2,"column":1046}},{"source":"../src/TransportWebUSB.js","name":"framing","original":{"line":191,"column":14},"generated":{"line":2,"column":1048}},{"source":"../src/TransportWebUSB.js","name":"reduceResponse","original":{"line":191,"column":22},"generated":{"line":2,"column":1050}},{"source":"../src/TransportWebUSB.js","name":"acc","original":{"line":191,"column":37},"generated":{"line":2,"column":1065}},{"source":"../src/TransportWebUSB.js","name":"buffer","original":{"line":191,"column":42},"generated":{"line":2,"column":1067}},{"source":"../src/TransportWebUSB.js","name":"result","original":{"line":195,"column":13},"generated":{"line":2,"column":1070}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":194,"column":10},"generated":{"line":2,"column":1077}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":194,"column":10},"generated":{"line":2,"column":1079}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":194,"column":10},"generated":{"line":2,"column":1081}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":194,"column":10},"generated":{"line":2,"column":1086}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":194,"column":18},"generated":{"line":2,"column":1093}},{"source":"../src/TransportWebUSB.js","name":"result","original":{"line":194,"column":26},"generated":{"line":2,"column":1099}},{"source":"../src/TransportWebUSB.js","name":"toString","original":{"line":194,"column":33},"generated":{"line":2,"column":1101}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":194,"column":42},"generated":{"line":2,"column":1110}},{"source":"../src/TransportWebUSB.js","name":"result","original":{"line":195,"column":13},"generated":{"line":2,"column":1118}},{"source":"../src/TransportWebUSB.js","name":"catch","original":{"line":196,"column":7},"generated":{"line":2,"column":1122}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":196,"column":14},"generated":{"line":2,"column":1128}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":197,"column":10},"generated":{"line":2,"column":1132}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":197,"column":10},"generated":{"line":2,"column":1135}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":197,"column":15},"generated":{"line":2,"column":1138}},{"source":"../src/TransportWebUSB.js","name":"message","original":{"line":197,"column":17},"generated":{"line":2,"column":1140}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":197,"column":28},"generated":{"line":2,"column":1149}},{"source":"../src/TransportWebUSB.js","name":"message","original":{"line":197,"column":30},"generated":{"line":2,"column":1151}},{"source":"../src/TransportWebUSB.js","name":"includes","original":{"line":197,"column":38},"generated":{"line":2,"column":1159}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":197,"column":47},"generated":{"line":2,"column":1168}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":199,"column":14},"generated":{"line":2,"column":1184}},{"source":"../src/TransportWebUSB.js","name":"_emitDisconnect","original":{"line":198,"column":13},"generated":{"line":2,"column":1190}},{"source":"../src/TransportWebUSB.js","name":"_emitDisconnect","original":{"line":198,"column":13},"generated":{"line":2,"column":1195}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":198,"column":29},"generated":{"line":2,"column":1211}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":199,"column":14},"generated":{"line":2,"column":1214}},{"source":"../src/TransportWebUSB.js","name":"DisconnectedDeviceDuringOperation","original":{"line":199,"column":18},"generated":{"line":2,"column":1218}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":199,"column":14},"generated":{"line":2,"column":1220}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":199,"column":52},"generated":{"line":2,"column":1254}},{"source":"../src/TransportWebUSB.js","name":"message","original":{"line":199,"column":54},"generated":{"line":2,"column":1256}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":201,"column":12},"generated":{"line":2,"column":1265}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":201,"column":12},"generated":{"line":2,"column":1271}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":45,"column":9},"generated":{"line":2,"column":1276}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":45,"column":9},"generated":{"line":2,"column":1281}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":45,"column":18},"generated":{"line":2,"column":1288}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":46,"column":9},"generated":{"line":2,"column":1290}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":46,"column":9},"generated":{"line":2,"column":1295}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":46,"column":27},"generated":{"line":2,"column":1311}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":47,"column":9},"generated":{"line":2,"column":1313}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":47,"column":9},"generated":{"line":2,"column":1318}},{"source":"../src/TransportWebUSB.js","name":"identifyUSBProductId","original":{"line":47,"column":23},"generated":{"line":2,"column":1331}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":47,"column":44},"generated":{"line":2,"column":1333}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":47,"column":44},"generated":{"line":2,"column":1335}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":47,"column":44},"generated":{"line":2,"column":1357}},{"source":"../src/TransportWebUSB.js","name":"productId","original":{"line":47,"column":51},"generated":{"line":2,"column":1359}},{"source":"../src/TransportWebUSB.js","name":"request","original":{"line":99,"column":15},"generated":{"line":2,"column":1370}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":100,"column":10},"generated":{"line":2,"column":1393}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":100,"column":10},"generated":{"line":2,"column":1399}},{"source":"../src/TransportWebUSB.js","name":"requestLedgerDevice","original":{"line":100,"column":25},"generated":{"line":2,"column":1407}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":100,"column":4},"generated":{"line":2,"column":1409}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":100,"column":4},"generated":{"line":2,"column":1411}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":101,"column":11},"generated":{"line":2,"column":1434}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":101,"column":11},"generated":{"line":2,"column":1441}},{"source":"../src/TransportWebUSB.js","name":"open","original":{"line":101,"column":27},"generated":{"line":2,"column":1443}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":101,"column":32},"generated":{"line":2,"column":1448}},{"source":"../src/TransportWebUSB.js","name":"openConnected","original":{"line":107,"column":15},"generated":{"line":2,"column":1451}},{"source":"../src/TransportWebUSB.js","name":"devices","original":{"line":108,"column":10},"generated":{"line":2,"column":1480}},{"source":"../src/TransportWebUSB.js","name":"devices","original":{"line":108,"column":10},"generated":{"line":2,"column":1486}},{"source":"../src/TransportWebUSB.js","name":"getLedgerDevices","original":{"line":108,"column":26},"generated":{"line":2,"column":1494}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":108,"column":4},"generated":{"line":2,"column":1496}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":108,"column":4},"generated":{"line":2,"column":1498}},{"source":"../src/TransportWebUSB.js","name":"devices","original":{"line":109,"column":8},"generated":{"line":2,"column":1518}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":109,"column":27},"generated":{"line":2,"column":1525}},{"source":"../src/TransportWebUSB.js","name":"devices","original":{"line":109,"column":8},"generated":{"line":2,"column":1529}},{"source":"../src/TransportWebUSB.js","name":"length","original":{"line":109,"column":16},"generated":{"line":2,"column":1531}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":109,"column":37},"generated":{"line":2,"column":1538}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":110,"column":11},"generated":{"line":2,"column":1543}},{"source":"../src/TransportWebUSB.js","name":"open","original":{"line":110,"column":27},"generated":{"line":2,"column":1545}},{"source":"../src/TransportWebUSB.js","name":"devices","original":{"line":110,"column":32},"generated":{"line":2,"column":1550}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":110,"column":40},"generated":{"line":2,"column":1552}},{"source":"../src/TransportWebUSB.js","name":"open","original":{"line":116,"column":15},"generated":{"line":2,"column":1556}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":116,"column":20},"generated":{"line":2,"column":1574}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":117,"column":10},"generated":{"line":2,"column":1583}},{"source":"../src/TransportWebUSB.js","name":"open","original":{"line":117,"column":17},"generated":{"line":2,"column":1585}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":118,"column":33},"generated":{"line":2,"column":1592}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":118,"column":8},"generated":{"line":2,"column":1599}},{"source":"../src/TransportWebUSB.js","name":"configuration","original":{"line":118,"column":15},"generated":{"line":2,"column":1601}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":119,"column":12},"generated":{"line":2,"column":1622}},{"source":"../src/TransportWebUSB.js","name":"selectConfiguration","original":{"line":119,"column":19},"generated":{"line":2,"column":1624}},{"source":"../src/TransportWebUSB.js","name":"configurationValue","original":{"line":119,"column":39},"generated":{"line":2,"column":1644}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":121,"column":10},"generated":{"line":2,"column":1653}},{"source":"../src/TransportWebUSB.js","name":"reset","original":{"line":121,"column":17},"generated":{"line":2,"column":1655}},{"source":"../src/TransportWebUSB.js","name":"iface","original":{"line":122,"column":10},"generated":{"line":2,"column":1663}},{"source":"../src/TransportWebUSB.js","name":"iface","original":{"line":122,"column":10},"generated":{"line":2,"column":1669}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":122,"column":18},"generated":{"line":2,"column":1671}},{"source":"../src/TransportWebUSB.js","name":"configurations","original":{"line":122,"column":25},"generated":{"line":2,"column":1673}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":122,"column":40},"generated":{"line":2,"column":1688}},{"source":"../src/TransportWebUSB.js","name":"interfaces","original":{"line":122,"column":43},"generated":{"line":2,"column":1691}},{"source":"../src/TransportWebUSB.js","name":"find","original":{"line":122,"column":54},"generated":{"line":2,"column":1702}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":122,"column":59},"generated":{"line":2,"column":1707}},{"source":"../src/TransportWebUSB.js","name":"alternates","original":{"line":122,"column":62},"generated":{"line":2,"column":1709}},{"source":"../src/TransportWebUSB.js","name":"alternates","original":{"line":122,"column":62},"generated":{"line":2,"column":1720}},{"source":"../src/TransportWebUSB.js","name":"alternates","original":{"line":123,"column":6},"generated":{"line":2,"column":1725}},{"source":"../src/TransportWebUSB.js","name":"some","original":{"line":123,"column":17},"generated":{"line":2,"column":1727}},{"source":"../src/TransportWebUSB.js","name":"a","original":{"line":123,"column":23},"generated":{"line":2,"column":1732}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":123,"column":50},"generated":{"line":2,"column":1735}},{"source":"../src/TransportWebUSB.js","name":"a","original":{"line":123,"column":29},"generated":{"line":2,"column":1741}},{"source":"../src/TransportWebUSB.js","name":"interfaceClass","original":{"line":123,"column":31},"generated":{"line":2,"column":1743}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":125,"column":8},"generated":{"line":2,"column":1760}},{"source":"../src/TransportWebUSB.js","name":"iface","original":{"line":125,"column":9},"generated":{"line":2,"column":1764}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":126,"column":12},"generated":{"line":2,"column":1766}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":126,"column":12},"generated":{"line":2,"column":1772}},{"source":"../src/TransportWebUSB.js","name":"TransportInterfaceNotAvailable","original":{"line":126,"column":16},"generated":{"line":2,"column":1776}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":126,"column":12},"generated":{"line":2,"column":1778}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":127,"column":8},"generated":{"line":2,"column":1809}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":130,"column":10},"generated":{"line":2,"column":1910}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":130,"column":10},"generated":{"line":2,"column":1916}},{"source":"../src/TransportWebUSB.js","name":"iface","original":{"line":130,"column":28},"generated":{"line":2,"column":1918}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":130,"column":34},"generated":{"line":2,"column":1920}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":131,"column":8},"generated":{"line":2,"column":1936}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":132,"column":12},"generated":{"line":2,"column":1946}},{"source":"../src/TransportWebUSB.js","name":"claimInterface","original":{"line":132,"column":19},"generated":{"line":2,"column":1948}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":132,"column":34},"generated":{"line":2,"column":1963}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":133,"column":6},"generated":{"line":2,"column":1966}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":133,"column":13},"generated":{"line":2,"column":1972}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":135,"column":12},"generated":{"line":2,"column":1975}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":134,"column":12},"generated":{"line":2,"column":1987}},{"source":"../src/TransportWebUSB.js","name":"close","original":{"line":134,"column":19},"generated":{"line":2,"column":1989}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":135,"column":12},"generated":{"line":2,"column":1997}},{"source":"../src/TransportWebUSB.js","name":"TransportInterfaceNotAvailable","original":{"line":135,"column":16},"generated":{"line":2,"column":2001}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":135,"column":12},"generated":{"line":2,"column":2003}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":135,"column":47},"generated":{"line":2,"column":2034}},{"source":"../src/TransportWebUSB.js","name":"message","original":{"line":135,"column":49},"generated":{"line":2,"column":2036}},{"source":"../src/TransportWebUSB.js","name":"transport","original":{"line":137,"column":10},"generated":{"line":2,"column":2045}},{"source":"../src/TransportWebUSB.js","name":"transport","original":{"line":137,"column":10},"generated":{"line":2,"column":2051}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":137,"column":22},"generated":{"line":2,"column":2053}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":137,"column":26},"generated":{"line":2,"column":2057}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":137,"column":42},"generated":{"line":2,"column":2059}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":137,"column":50},"generated":{"line":2,"column":2061}},{"source":"../src/TransportWebUSB.js","name":"onDisconnect","original":{"line":138,"column":10},"generated":{"line":2,"column":2064}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":138,"column":26},"generated":{"line":2,"column":2066}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":139,"column":10},"generated":{"line":2,"column":2070}},{"source":"../src/TransportWebUSB.js","name":"e","original":{"line":139,"column":21},"generated":{"line":2,"column":2074}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":139,"column":23},"generated":{"line":2,"column":2076}},{"source":"../src/TransportWebUSB.js","name":"navigator","original":{"line":141,"column":8},"generated":{"line":2,"column":2085}},{"source":"../src/TransportWebUSB.js","name":"usb","original":{"line":141,"column":18},"generated":{"line":2,"column":2095}},{"source":"../src/TransportWebUSB.js","name":"removeEventListener","original":{"line":141,"column":22},"generated":{"line":2,"column":2099}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":141,"column":42},"generated":{"line":2,"column":2119}},{"source":"../src/TransportWebUSB.js","name":"onDisconnect","original":{"line":141,"column":56},"generated":{"line":2,"column":2132}},{"source":"../src/TransportWebUSB.js","name":"transport","original":{"line":142,"column":8},"generated":{"line":2,"column":2135}},{"source":"../src/TransportWebUSB.js","name":"_emitDisconnect","original":{"line":142,"column":18},"generated":{"line":2,"column":2137}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":142,"column":34},"generated":{"line":2,"column":2153}},{"source":"../src/TransportWebUSB.js","name":"DisconnectedDevice","original":{"line":142,"column":38},"generated":{"line":2,"column":2157}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":142,"column":34},"generated":{"line":2,"column":2159}},{"source":"../src/TransportWebUSB.js","name":"transport","original":{"line":147,"column":11},"generated":{"line":2,"column":2181}},{"source":"../src/TransportWebUSB.js","name":"navigator","original":{"line":146,"column":4},"generated":{"line":2,"column":2188}},{"source":"../src/TransportWebUSB.js","name":"usb","original":{"line":146,"column":14},"generated":{"line":2,"column":2198}},{"source":"../src/TransportWebUSB.js","name":"addEventListener","original":{"line":146,"column":18},"generated":{"line":2,"column":2202}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":146,"column":35},"generated":{"line":2,"column":2219}},{"source":"../src/TransportWebUSB.js","name":"onDisconnect","original":{"line":146,"column":49},"generated":{"line":2,"column":2232}},{"source":"../src/TransportWebUSB.js","name":"transport","original":{"line":147,"column":11},"generated":{"line":2,"column":2235}},{"source":"../src/TransportWebUSB.js","name":"close","original":{"line":160,"column":8},"generated":{"line":2,"column":2237}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":161,"column":10},"generated":{"line":2,"column":2257}},{"source":"../src/TransportWebUSB.js","name":"exchangeBusyPromise","original":{"line":161,"column":15},"generated":{"line":2,"column":2262}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":162,"column":10},"generated":{"line":2,"column":2288}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":162,"column":15},"generated":{"line":2,"column":2293}},{"source":"../src/TransportWebUSB.js","name":"releaseInterface","original":{"line":162,"column":22},"generated":{"line":2,"column":2300}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":162,"column":39},"generated":{"line":2,"column":2317}},{"source":"../src/TransportWebUSB.js","name":"interfaceNumber","original":{"line":162,"column":44},"generated":{"line":2,"column":2322}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":163,"column":10},"generated":{"line":2,"column":2345}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":163,"column":15},"generated":{"line":2,"column":2350}},{"source":"../src/TransportWebUSB.js","name":"reset","original":{"line":163,"column":22},"generated":{"line":2,"column":2357}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":164,"column":10},"generated":{"line":2,"column":2371}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":164,"column":15},"generated":{"line":2,"column":2376}},{"source":"../src/TransportWebUSB.js","name":"close","original":{"line":164,"column":22},"generated":{"line":2,"column":2383}},{"source":"../src/TransportWebUSB.js","name":"setScrambleKey","original":{"line":204,"column":2},"generated":{"line":2,"column":2391}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2410}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2418}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2426}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2428}},{"source":"../src/TransportWebUSB.js","name":"isSupported","original":{"line":53,"column":9},"generated":{"line":2,"column":2430}},{"source":"../src/TransportWebUSB.js","name":"isSupported","original":{"line":53,"column":23},"generated":{"line":2,"column":2442}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2444}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2456}},{"source":"../src/TransportWebUSB.js","name":"list","original":{"line":58,"column":9},"generated":{"line":2,"column":2458}},{"source":"../src/TransportWebUSB.js","name":"getLedgerDevices","original":{"line":58,"column":16},"generated":{"line":2,"column":2463}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2465}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSB","original":{"line":36,"column":21},"generated":{"line":2,"column":2482}},{"source":"../src/TransportWebUSB.js","name":"listen","original":{"line":66,"column":9},"generated":{"line":2,"column":2484}},{"source":"../src/TransportWebUSB.js","name":"observer","original":{"line":67,"column":4},"generated":{"line":2,"column":2491}},{"source":"../src/TransportWebUSB.js","name":"observer","original":{"line":67,"column":4},"generated":{"line":2,"column":2492}},{"source":"../src/TransportWebUSB.js","name":"unsubscribed","original":{"line":69,"column":8},"generated":{"line":2,"column":2496}},{"source":"../src/TransportWebUSB.js","name":"unsubscribed","original":{"line":69,"column":8},"generated":{"line":2,"column":2500}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":69,"column":23},"generated":{"line":2,"column":2503}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":93,"column":11},"generated":{"line":2,"column":2505}},{"source":"../src/TransportWebUSB.js","name":"then","original":{"line":70,"column":27},"generated":{"line":2,"column":2512}},{"source":"../src/TransportWebUSB.js","name":"then","original":{"line":70,"column":27},"generated":{"line":2,"column":2514}},{"source":"../src/TransportWebUSB.js","name":"then","original":{"line":70,"column":27},"generated":{"line":2,"column":2516}},{"source":"../src/TransportWebUSB.js","name":"then","original":{"line":70,"column":27},"generated":{"line":2,"column":2540}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":71,"column":7},"generated":{"line":2,"column":2545}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":72,"column":12},"generated":{"line":2,"column":2549}},{"source":"../src/TransportWebUSB.js","name":"unsubscribed","original":{"line":72,"column":13},"generated":{"line":2,"column":2553}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":72,"column":27},"generated":{"line":2,"column":2555}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":73,"column":16},"generated":{"line":2,"column":2556}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":73,"column":16},"generated":{"line":2,"column":2562}},{"source":"../src/TransportWebUSB.js","name":"identifyUSBProductId","original":{"line":73,"column":30},"generated":{"line":2,"column":2565}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":73,"column":51},"generated":{"line":2,"column":2567}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":73,"column":51},"generated":{"line":2,"column":2569}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":73,"column":51},"generated":{"line":2,"column":2591}},{"source":"../src/TransportWebUSB.js","name":"productId","original":{"line":73,"column":58},"generated":{"line":2,"column":2593}},{"source":"../src/TransportWebUSB.js","name":"observer","original":{"line":74,"column":10},"generated":{"line":2,"column":2604}},{"source":"../src/TransportWebUSB.js","name":"next","original":{"line":74,"column":19},"generated":{"line":2,"column":2606}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":74,"column":24},"generated":{"line":2,"column":2611}},{"source":"../src/TransportWebUSB.js","name":"type","original":{"line":74,"column":26},"generated":{"line":2,"column":2612}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":74,"column":32},"generated":{"line":2,"column":2617}},{"source":"../src/TransportWebUSB.js","name":"descriptor","original":{"line":74,"column":39},"generated":{"line":2,"column":2623}},{"source":"../src/TransportWebUSB.js","name":"device","original":{"line":74,"column":51},"generated":{"line":2,"column":2634}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":74,"column":59},"generated":{"line":2,"column":2636}},{"source":"../src/TransportWebUSB.js","name":"deviceModel","original":{"line":74,"column":59},"generated":{"line":2,"column":2648}},{"source":"../src/TransportWebUSB.js","name":"observer","original":{"line":75,"column":10},"generated":{"line":2,"column":2652}},{"source":"../src/TransportWebUSB.js","name":"complete","original":{"line":75,"column":19},"generated":{"line":2,"column":2654}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":78,"column":7},"generated":{"line":2,"column":2667}},{"source":"../src/TransportWebUSB.js","name":"window","original":{"line":80,"column":10},"generated":{"line":2,"column":2671}},{"source":"../src/TransportWebUSB.js","name":"DOMException","original":{"line":80,"column":17},"generated":{"line":2,"column":2678}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":81,"column":10},"generated":{"line":2,"column":2692}},{"source":"../src/TransportWebUSB.js","name":"window","original":{"line":81,"column":27},"generated":{"line":2,"column":2705}},{"source":"../src/TransportWebUSB.js","name":"DOMException","original":{"line":81,"column":34},"generated":{"line":2,"column":2712}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":82,"column":25},"generated":{"line":2,"column":2726}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":82,"column":10},"generated":{"line":2,"column":2731}},{"source":"../src/TransportWebUSB.js","name":"code","original":{"line":82,"column":16},"generated":{"line":2,"column":2733}},{"source":"../src/TransportWebUSB.js","name":"observer","original":{"line":84,"column":10},"generated":{"line":2,"column":2738}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":84,"column":19},"generated":{"line":2,"column":2740}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":84,"column":25},"generated":{"line":2,"column":2746}},{"source":"../src/TransportWebUSB.js","name":"TransportWebUSBGestureRequired","original":{"line":84,"column":29},"generated":{"line":2,"column":2750}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":84,"column":25},"generated":{"line":2,"column":2752}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":84,"column":60},"generated":{"line":2,"column":2783}},{"source":"../src/TransportWebUSB.js","name":"message","original":{"line":84,"column":66},"generated":{"line":2,"column":2785}},{"source":"../src/TransportWebUSB.js","name":"observer","original":{"line":86,"column":10},"generated":{"line":2,"column":2795}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":86,"column":19},"generated":{"line":2,"column":2797}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":86,"column":25},"generated":{"line":2,"column":2803}},{"source":"../src/TransportWebUSB.js","name":"TransportOpenUserCancelled","original":{"line":86,"column":29},"generated":{"line":2,"column":2807}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":86,"column":25},"generated":{"line":2,"column":2809}},{"source":"../src/TransportWebUSB.js","name":"error","original":{"line":86,"column":56},"generated":{"line":2,"column":2836}},{"source":"../src/TransportWebUSB.js","name":"message","original":{"line":86,"column":62},"generated":{"line":2,"column":2838}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":93,"column":11},"generated":{"line":2,"column":2850}},{"source":"../src/TransportWebUSB.js","name":"unsubscribe","original":{"line":93,"column":13},"generated":{"line":2,"column":2851}},{"source":"../src/TransportWebUSB.js","name":"unsubscribe","original":{"line":90,"column":13},"generated":{"line":2,"column":2863}},{"source":"../src/TransportWebUSB.js","name":"unsubscribed","original":{"line":91,"column":6},"generated":{"line":2,"column":2874}},{"source":"../src/TransportWebUSB.js","name":null,"original":{"line":91,"column":21},"generated":{"line":2,"column":2877}}],"sources":{"../src/TransportWebUSB.js":"//@flow\nimport Transport from \"@ledgerhq/hw-transport\";\nimport type {\n  Observer,\n  DescriptorEvent,\n  Subscription,\n} from \"@ledgerhq/hw-transport\";\nimport hidFraming from \"@ledgerhq/devices/lib/hid-framing\";\nimport { identifyUSBProductId } from \"@ledgerhq/devices\";\nimport type { DeviceModel } from \"@ledgerhq/devices\";\nimport { log } from \"@ledgerhq/logs\";\nimport {\n  TransportOpenUserCancelled,\n  TransportInterfaceNotAvailable,\n  TransportWebUSBGestureRequired,\n  DisconnectedDeviceDuringOperation,\n  DisconnectedDevice,\n} from \"@ledgerhq/errors\";\nimport {\n  getLedgerDevices,\n  getFirstLedgerDevice,\n  requestLedgerDevice,\n  isSupported,\n} from \"./webusb\";\n\nconst configurationValue = 1;\nconst endpointNumber = 3;\n\n/**\n * WebUSB Transport implementation\n * @example\n * import TransportWebUSB from \"@ledgerhq/hw-transport-webusb\";\n * ...\n * TransportWebUSB.create().then(transport => ...)\n */\nexport default class TransportWebUSB extends Transport<USBDevice> {\n  device: USBDevice;\n  deviceModel: ?DeviceModel;\n  channel = Math.floor(Math.random() * 0xffff);\n  packetSize = 64;\n  interfaceNumber: number;\n\n  constructor(device: USBDevice, interfaceNumber: number) {\n    super();\n    this.device = device;\n    this.interfaceNumber = interfaceNumber;\n    this.deviceModel = identifyUSBProductId(device.productId);\n  }\n\n  /**\n   * Check if WebUSB transport is supported.\n   */\n  static isSupported = isSupported;\n\n  /**\n   * List the WebUSB devices that was previously authorized by the user.\n   */\n  static list = getLedgerDevices;\n\n  /**\n   * Actively listen to WebUSB devices and emit ONE device\n   * that was either accepted before, if not it will trigger the native permission UI.\n   *\n   * Important: it must be called in the context of a UI click!\n   */\n  static listen = (\n    observer: Observer<DescriptorEvent<USBDevice>>\n  ): Subscription => {\n    let unsubscribed = false;\n    getFirstLedgerDevice().then(\n      (device) => {\n        if (!unsubscribed) {\n          const deviceModel = identifyUSBProductId(device.productId);\n          observer.next({ type: \"add\", descriptor: device, deviceModel });\n          observer.complete();\n        }\n      },\n      (error) => {\n        if (\n          window.DOMException &&\n          error instanceof window.DOMException &&\n          error.code === 18\n        ) {\n          observer.error(new TransportWebUSBGestureRequired(error.message));\n        } else {\n          observer.error(new TransportOpenUserCancelled(error.message));\n        }\n      }\n    );\n    function unsubscribe() {\n      unsubscribed = true;\n    }\n    return { unsubscribe };\n  };\n\n  /**\n   * Similar to create() except it will always display the device permission (even if some devices are already accepted).\n   */\n  static async request() {\n    const device = await requestLedgerDevice();\n    return TransportWebUSB.open(device);\n  }\n\n  /**\n   * Similar to create() except it will never display the device permission (it returns a Promise<?Transport>, null if it fails to find a device).\n   */\n  static async openConnected() {\n    const devices = await getLedgerDevices();\n    if (devices.length === 0) return null;\n    return TransportWebUSB.open(devices[0]);\n  }\n\n  /**\n   * Create a Ledger transport with a USBDevice\n   */\n  static async open(device: USBDevice) {\n    await device.open();\n    if (device.configuration === null) {\n      await device.selectConfiguration(configurationValue);\n    }\n    await device.reset();\n    const iface = device.configurations[0].interfaces.find(({ alternates }) =>\n      alternates.some((a) => a.interfaceClass === 255)\n    );\n    if (!iface) {\n      throw new TransportInterfaceNotAvailable(\n        \"No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.\"\n      );\n    }\n    const interfaceNumber = iface.interfaceNumber;\n    try {\n      await device.claimInterface(interfaceNumber);\n    } catch (e) {\n      await device.close();\n      throw new TransportInterfaceNotAvailable(e.message);\n    }\n    const transport = new TransportWebUSB(device, interfaceNumber);\n    const onDisconnect = (e) => {\n      if (device === e.device) {\n        // $FlowFixMe\n        navigator.usb.removeEventListener(\"disconnect\", onDisconnect);\n        transport._emitDisconnect(new DisconnectedDevice());\n      }\n    };\n    // $FlowFixMe\n    navigator.usb.addEventListener(\"disconnect\", onDisconnect);\n    return transport;\n  }\n\n  _disconnectEmitted = false;\n  _emitDisconnect = (e: Error) => {\n    if (this._disconnectEmitted) return;\n    this._disconnectEmitted = true;\n    this.emit(\"disconnect\", e);\n  };\n\n  /**\n   * Release the transport device\n   */\n  async close(): Promise<void> {\n    await this.exchangeBusyPromise;\n    await this.device.releaseInterface(this.interfaceNumber);\n    await this.device.reset();\n    await this.device.close();\n  }\n\n  /**\n   * Exchange with the device using APDU protocol.\n   * @param apdu\n   * @returns a promise of apdu response\n   */\n  exchange = (apdu: Buffer): Promise<Buffer> =>\n    this.exchangeAtomicImpl(async () => {\n      const { channel, packetSize } = this;\n      log(\"apdu\", \"=> \" + apdu.toString(\"hex\"));\n\n      const framing = hidFraming(channel, packetSize);\n\n      // Write...\n      const blocks = framing.makeBlocks(apdu);\n      for (let i = 0; i < blocks.length; i++) {\n        await this.device.transferOut(endpointNumber, blocks[i]);\n      }\n\n      // Read...\n      let result;\n      let acc;\n      while (!(result = framing.getReducedResult(acc))) {\n        const r = await this.device.transferIn(endpointNumber, packetSize);\n        const buffer = Buffer.from(r.data.buffer);\n        acc = framing.reduceResponse(acc, buffer);\n      }\n\n      log(\"apdu\", \"<= \" + result.toString(\"hex\"));\n      return result;\n    }).catch((e) => {\n      if (e && e.message && e.message.includes(\"disconnected\")) {\n        this._emitDisconnect(e);\n        throw new DisconnectedDeviceDuringOperation(e.message);\n      }\n      throw e;\n    });\n\n  setScrambleKey() {}\n}\n"},"lineCount":null}},"error":null,"hash":"59b87cedccba408e3c7129467d519dec","cacheData":{"env":{}}}