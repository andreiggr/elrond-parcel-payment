{"id":"node_modules/@elrondnetwork/erdjs/out/esdtHelpers.js","dependencies":[{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/esdtHelpers.js.map","includedInParent":true,"mtime":1647170304985},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/package.json","includedInParent":true,"mtime":1647174146392},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/package.json","includedInParent":true,"mtime":1647170304850},{"name":"./scArgumentsParser","loc":{"line":7,"column":36,"index":282},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/esdtHelpers.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/scArgumentsParser.js"},{"name":"./errors","loc":{"line":8,"column":25,"index":331},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/esdtHelpers.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/errors.js"},{"name":"bignumber.js","loc":{"line":9,"column":47,"index":391},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/esdtHelpers.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/bignumber.js/bignumber.js"},{"name":"./constants","loc":{"line":10,"column":28,"index":437},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/esdtHelpers.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/constants.js"}],"generated":{"js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EsdtHelpers = void 0;\nconst scArgumentsParser_1 = require(\"./scArgumentsParser\");\nconst errors_1 = require(\"./errors\");\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nconst constants_1 = require(\"./constants\");\n/**\n * This class exposes static methods that are useful for parsing ESDT transfer transactions\n */\nclass EsdtHelpers {\n    /**\n     * This function will return the token identifier and the amount from a given data field for an ESDT transfer, or\n     * an exception if something went wrong\n     * @param dataField this field represents the data filed to extract esdt transfer data from\n     * @throws ErrInvalidEsdtTransferDataField this function throws an ErrInvalidEsdtTransferDataField if the provided data field isn't meant to be an ESDT transfer\n     * @return {tokenIdentifier, amount} this function returns a pair of token identifier and amount to transfer\n     */\n    static extractFieldsFromEsdtTransferDataField(dataField) {\n        if (!dataField.startsWith(constants_1.ESDT_TRANSFER_FUNCTION_NAME + \"@\")) {\n            throw new errors_1.ErrInvalidEsdtTransferDataField();\n        }\n        let { args } = scArgumentsParser_1.ScArgumentsParser.parseSmartContractCallDataField(dataField);\n        if (args.length != 2) {\n            throw new errors_1.ErrInvalidEsdtTransferDataField();\n        }\n        let tokenIdentifier = args[0];\n        let amount = new bignumber_js_1.default(args[1], 16).toString(10);\n        return {\n            tokenIdentifier: tokenIdentifier,\n            amount: amount\n        };\n    }\n    /**\n     * This function checks if the data field represents a valid ESDT transfer call\n     * @param dataField this field represents the string to be checked if it would trigger an ESDT transfer call\n     * @return true if the provided data field is meant to be an ESDT transfer\n     */\n    static isEsdtTransferTransaction(dataField) {\n        if (!dataField.startsWith(constants_1.ESDT_TRANSFER_FUNCTION_NAME + \"@\")) {\n            return false;\n        }\n        let args;\n        try {\n            args = scArgumentsParser_1.ScArgumentsParser.parseSmartContractCallDataField(dataField).args;\n        }\n        catch (e) {\n            return false;\n        }\n        return args.length === 2;\n    }\n    /**\n     * getTxFieldsForEsdtTransfer returns the needed value, gasLimit and data field (in string format) for sending an amount of ESDT token\n     * @param tokenIdentifier this field represents the identifier of the token to transfer\n     * @param amount this field represents the denominated amount of the token to send\n     * @return {value, gasLimit, data} this function returns the value, the gas limit and the data field to use\n     */\n    static getTxFieldsForEsdtTransfer(tokenIdentifier, amount) {\n        const encodedAmount = new bignumber_js_1.default(amount, 10).toString(16);\n        const txDataField = [constants_1.ESDT_TRANSFER_FUNCTION_NAME, tokenIdentifier, encodedAmount].join(\"@\");\n        return {\n            value: constants_1.ESDT_TRANSFER_VALUE,\n            gasLimit: constants_1.ESDT_TRANSFER_GAS_LIMIT,\n            data: txDataField\n        };\n    }\n}\nexports.EsdtHelpers = EsdtHelpers;\n"},"sourceMaps":{"js":{"version":3,"file":"esdtHelpers.js","sourceRoot":"","sources":["../src/esdtHelpers.ts"],"names":[],"mappings":";;;;;;AAAA,2DAAsD;AACtD,qCAAyD;AACzD,gEAAqC;AACrC,2CAAsG;AAEtG;;GAEG;AACH,MAAa,WAAW;IAEpB;;;;;;OAMG;IACI,MAAM,CAAC,sCAAsC,CAAC,SAAiB;QAClE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,uCAA2B,GAAG,GAAG,CAAC,EAAE;YAC1D,MAAM,IAAI,wCAA+B,EAAE,CAAC;SAC/C;QAED,IAAI,EAAC,IAAI,EAAC,GAAG,qCAAiB,CAAC,+BAA+B,CAAC,SAAS,CAAC,CAAC;QAE1E,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;YAClB,MAAM,IAAI,wCAA+B,EAAE,CAAC;SAC/C;QAED,IAAI,eAAe,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,MAAM,GAAG,IAAI,sBAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAErD,OAAO;YACH,eAAe,EAAE,eAAe;YAChC,MAAM,EAAE,MAAM;SACjB,CAAC;IACN,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,yBAAyB,CAAC,SAAiB;QACrD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,uCAA2B,GAAG,GAAG,CAAC,EAAE;YAC1D,OAAO,KAAK,CAAC;SAChB;QAED,IAAI,IAAc,CAAC;QACnB,IAAI;YACA,IAAI,GAAG,qCAAiB,CAAC,+BAA+B,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;SAC5E;QAAC,OAAO,CAAC,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC;IAC7B,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,0BAA0B,CAAC,eAAuB,EAAE,MAAc;QAC5E,MAAM,aAAa,GAAG,IAAI,sBAAS,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC7D,MAAM,WAAW,GAAG,CAAC,uCAA2B,EAAE,eAAe,EAAE,aAAa,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAE5F,OAAO;YACH,KAAK,EAAE,+BAAmB;YAC1B,QAAQ,EAAE,mCAAuB;YACjC,IAAI,EAAE,WAAW;SACpB,CAAC;IACN,CAAC;CACJ;AAjED,kCAiEC","sourcesContent":[null]}},"error":null,"hash":"fec6266d172e713d6c9e81aeb3a7e389","cacheData":{"env":{}}}