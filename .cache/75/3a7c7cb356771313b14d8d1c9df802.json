{"id":"j0o3","dependencies":[{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js.map","includedInParent":true,"mtime":1647170302802},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/package.json","includedInParent":true,"mtime":1647174146392},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/package.json","includedInParent":true,"mtime":1647170302745},{"name":"u2f-api","loc":{"line":1,"column":34,"index":34},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/u2f-api/index.js"},{"name":"@ledgerhq/hw-transport","loc":{"line":2,"column":22,"index":67},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport/lib-es/Transport.js"},{"name":"@ledgerhq/logs","loc":{"line":3,"column":20,"index":113},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/logs/lib-es/index.js"},{"name":"@ledgerhq/errors","loc":{"line":4,"column":31,"index":162},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/errors/dist/index.js"},{"name":"buffer","parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var r=require(\"u2f-api\"),t=s(require(\"@ledgerhq/hw-transport\")),n=require(\"@ledgerhq/logs\"),o=require(\"@ledgerhq/errors\");function s(e){return e&&e.__esModule?e:{default:e}}function a(e,r,t){const n=new o.TransportError(r,t);return n.originalError=e,n}function i(r,t){const n=e.alloc(r.length);for(let e=0;e<r.length;e++)n[e]=r[e]^t[e%t.length];return n}const u=e=>e.replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/=+$/,\"\"),l=e=>e.replace(/-/g,\"+\").replace(/_/g,\"/\")+\"==\".substring(0,3*e.length%4);function c(t,o,s,a){const c=i(t,s),p=e.from(\"0000000000000000000000000000000000000000000000000000000000000000\",\"hex\"),d={version:\"U2F_V2\",keyHandle:u(c.toString(\"base64\")),challenge:u(p.toString(\"base64\")),appId:location.origin};return(0,n.log)(\"apdu\",\"=> \"+t.toString(\"hex\")),(0,r.sign)(d,o/1e3).then(r=>{const{signatureData:t}=r;if(\"string\"==typeof t){const r=e.from(l(t),\"base64\");let o;return o=a?r.slice(5):r,(0,n.log)(\"apdu\",\"<= \"+o.toString(\"hex\")),o}throw r})}let p=[];function d(){p.forEach(e=>e.emit(\"disconnect\")),p=[]}function h(e){return 5===e.metaData.code}class g extends t.default{static async open(e,r=5e3){return new g}constructor(){super(),this.scrambleKey=void 0,this.unwrap=!0,p.push(this)}async exchange(e){try{return await c(e,this.exchangeTimeout,this.scrambleKey,this.unwrap)}catch(r){throw\"object\"==typeof r.metaData?(h(r)&&d(),a(r,\"Failed to sign with Ledger device: U2F \"+r.metaData.type,\"U2F_\"+r.metaData.code)):r}}setScrambleKey(r){this.scrambleKey=e.from(r,\"ascii\")}setUnwrap(e){this.unwrap=e}close(){return Promise.resolve()}}exports.default=g,g.isSupported=r.isSupported,g.list=(()=>(0,r.isSupported)().then(e=>e?[null]:[])),g.listen=(e=>{let t=!1;return(0,r.isSupported)().then(r=>{t||(r?(e.next({type:\"add\",descriptor:null}),e.complete()):e.error(new o.TransportError(\"U2F browser support is needed for Ledger. Please use Chrome, Opera or Firefox with a U2F extension. Also make sure you're on an HTTPS connection\",\"U2FNotSupported\")))}),{unsubscribe:()=>{t=!0}}});"},"sourceMaps":{"js":{"mappings":[{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":0}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":4}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":6}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":14}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":24}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":31}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":38}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":53}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":61}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":74}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":75}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":82}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":86}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":94}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":107}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":3,"column":0},"generated":{"line":2,"column":109}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":3,"column":0},"generated":{"line":2,"column":113}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":3,"column":0},"generated":{"line":2,"column":115}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":3,"column":0},"generated":{"line":2,"column":123}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":134}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":136}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":138}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":146}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":173}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":175}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":183}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":6,"column":0},"generated":{"line":2,"column":201}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":6,"column":0},"generated":{"line":2,"column":203}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":6,"column":0},"generated":{"line":2,"column":211}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":231}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":240}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":242}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":245}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":252}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":255}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":257}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":268}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":270}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":271}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":279}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":8,"column":0},"generated":{"line":2,"column":282}},{"source":"../src/TransportU2F.js","name":"wrapU2FTransportError","original":{"line":8,"column":9},"generated":{"line":2,"column":291}},{"source":"../src/TransportU2F.js","name":"originalError","original":{"line":8,"column":31},"generated":{"line":2,"column":293}},{"source":"../src/TransportU2F.js","name":"message","original":{"line":8,"column":46},"generated":{"line":2,"column":295}},{"source":"../src/TransportU2F.js","name":"id","original":{"line":8,"column":55},"generated":{"line":2,"column":297}},{"source":"../src/TransportU2F.js","name":"err","original":{"line":9,"column":8},"generated":{"line":2,"column":300}},{"source":"../src/TransportU2F.js","name":"err","original":{"line":9,"column":8},"generated":{"line":2,"column":306}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":9,"column":14},"generated":{"line":2,"column":308}},{"source":"../src/TransportU2F.js","name":"TransportError","original":{"line":9,"column":18},"generated":{"line":2,"column":312}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":9,"column":14},"generated":{"line":2,"column":314}},{"source":"../src/TransportU2F.js","name":"message","original":{"line":9,"column":33},"generated":{"line":2,"column":329}},{"source":"../src/TransportU2F.js","name":"id","original":{"line":9,"column":42},"generated":{"line":2,"column":331}},{"source":"../src/TransportU2F.js","name":"err","original":{"line":12,"column":9},"generated":{"line":2,"column":334}},{"source":"../src/TransportU2F.js","name":"err","original":{"line":11,"column":2},"generated":{"line":2,"column":341}},{"source":"../src/TransportU2F.js","name":"originalError","original":{"line":11,"column":6},"generated":{"line":2,"column":343}},{"source":"../src/TransportU2F.js","name":"originalError","original":{"line":11,"column":22},"generated":{"line":2,"column":357}},{"source":"../src/TransportU2F.js","name":"err","original":{"line":12,"column":9},"generated":{"line":2,"column":359}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":15,"column":0},"generated":{"line":2,"column":361}},{"source":"../src/TransportU2F.js","name":"wrapApdu","original":{"line":15,"column":9},"generated":{"line":2,"column":370}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":15,"column":18},"generated":{"line":2,"column":372}},{"source":"../src/TransportU2F.js","name":"key","original":{"line":15,"column":32},"generated":{"line":2,"column":374}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":16,"column":8},"generated":{"line":2,"column":377}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":16,"column":8},"generated":{"line":2,"column":383}},{"source":"../src/TransportU2F.js","name":"Buffer","original":{"line":16,"column":17},"generated":{"line":2,"column":385}},{"source":"../src/TransportU2F.js","name":"alloc","original":{"line":16,"column":24},"generated":{"line":2,"column":387}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":16,"column":30},"generated":{"line":2,"column":393}},{"source":"../src/TransportU2F.js","name":"length","original":{"line":16,"column":35},"generated":{"line":2,"column":395}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":17,"column":7},"generated":{"line":2,"column":403}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":17,"column":7},"generated":{"line":2,"column":407}},{"source":"../src/TransportU2F.js","name":"i","original":{"line":17,"column":11},"generated":{"line":2,"column":411}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":17,"column":15},"generated":{"line":2,"column":413}},{"source":"../src/TransportU2F.js","name":"i","original":{"line":17,"column":18},"generated":{"line":2,"column":415}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":17,"column":22},"generated":{"line":2,"column":417}},{"source":"../src/TransportU2F.js","name":"length","original":{"line":17,"column":27},"generated":{"line":2,"column":419}},{"source":"../src/TransportU2F.js","name":"i","original":{"line":17,"column":35},"generated":{"line":2,"column":426}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":18,"column":4},"generated":{"line":2,"column":430}},{"source":"../src/TransportU2F.js","name":"i","original":{"line":18,"column":11},"generated":{"line":2,"column":432}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":18,"column":16},"generated":{"line":2,"column":435}},{"source":"../src/TransportU2F.js","name":"i","original":{"line":18,"column":21},"generated":{"line":2,"column":437}},{"source":"../src/TransportU2F.js","name":"key","original":{"line":18,"column":26},"generated":{"line":2,"column":440}},{"source":"../src/TransportU2F.js","name":"i","original":{"line":18,"column":30},"generated":{"line":2,"column":442}},{"source":"../src/TransportU2F.js","name":"key","original":{"line":18,"column":34},"generated":{"line":2,"column":444}},{"source":"../src/TransportU2F.js","name":"length","original":{"line":18,"column":38},"generated":{"line":2,"column":446}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":20,"column":9},"generated":{"line":2,"column":454}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":20,"column":9},"generated":{"line":2,"column":461}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":24,"column":0},"generated":{"line":2,"column":463}},{"source":"../src/TransportU2F.js","name":"webSafe64","original":{"line":24,"column":6},"generated":{"line":2,"column":469}},{"source":"../src/TransportU2F.js","name":"base64","original":{"line":24,"column":19},"generated":{"line":2,"column":471}},{"source":"../src/TransportU2F.js","name":"base64","original":{"line":25,"column":2},"generated":{"line":2,"column":474}},{"source":"../src/TransportU2F.js","name":"replace","original":{"line":25,"column":9},"generated":{"line":2,"column":476}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":25,"column":17},"generated":{"line":2,"column":484}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":25,"column":24},"generated":{"line":2,"column":490}},{"source":"../src/TransportU2F.js","name":"replace","original":{"line":25,"column":29},"generated":{"line":2,"column":495}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":25,"column":37},"generated":{"line":2,"column":503}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":25,"column":44},"generated":{"line":2,"column":509}},{"source":"../src/TransportU2F.js","name":"replace","original":{"line":25,"column":49},"generated":{"line":2,"column":514}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":25,"column":57},"generated":{"line":2,"column":522}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":25,"column":64},"generated":{"line":2,"column":528}},{"source":"../src/TransportU2F.js","name":"normal64","original":{"line":28,"column":6},"generated":{"line":2,"column":532}},{"source":"../src/TransportU2F.js","name":"base64","original":{"line":28,"column":18},"generated":{"line":2,"column":534}},{"source":"../src/TransportU2F.js","name":"base64","original":{"line":29,"column":2},"generated":{"line":2,"column":537}},{"source":"../src/TransportU2F.js","name":"replace","original":{"line":29,"column":9},"generated":{"line":2,"column":539}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":29,"column":17},"generated":{"line":2,"column":547}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":29,"column":23},"generated":{"line":2,"column":552}},{"source":"../src/TransportU2F.js","name":"replace","original":{"line":29,"column":28},"generated":{"line":2,"column":557}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":29,"column":36},"generated":{"line":2,"column":565}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":29,"column":42},"generated":{"line":2,"column":570}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":30,"column":2},"generated":{"line":2,"column":575}},{"source":"../src/TransportU2F.js","name":"substring","original":{"line":30,"column":7},"generated":{"line":2,"column":580}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":30,"column":17},"generated":{"line":2,"column":590}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":30,"column":21},"generated":{"line":2,"column":592}},{"source":"../src/TransportU2F.js","name":"base64","original":{"line":30,"column":25},"generated":{"line":2,"column":594}},{"source":"../src/TransportU2F.js","name":"length","original":{"line":30,"column":32},"generated":{"line":2,"column":596}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":30,"column":42},"generated":{"line":2,"column":603}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":32,"column":0},"generated":{"line":2,"column":606}},{"source":"../src/TransportU2F.js","name":"attemptExchange","original":{"line":32,"column":9},"generated":{"line":2,"column":615}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":33,"column":2},"generated":{"line":2,"column":617}},{"source":"../src/TransportU2F.js","name":"timeoutMillis","original":{"line":34,"column":2},"generated":{"line":2,"column":619}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":35,"column":2},"generated":{"line":2,"column":621}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":36,"column":2},"generated":{"line":2,"column":623}},{"source":"../src/TransportU2F.js","name":"keyHandle","original":{"line":38,"column":8},"generated":{"line":2,"column":626}},{"source":"../src/TransportU2F.js","name":"keyHandle","original":{"line":38,"column":8},"generated":{"line":2,"column":632}},{"source":"../src/TransportU2F.js","name":"wrapApdu","original":{"line":38,"column":20},"generated":{"line":2,"column":634}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":38,"column":29},"generated":{"line":2,"column":636}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":38,"column":35},"generated":{"line":2,"column":638}},{"source":"../src/TransportU2F.js","name":"challenge","original":{"line":39,"column":8},"generated":{"line":2,"column":641}},{"source":"../src/TransportU2F.js","name":"Buffer","original":{"line":39,"column":20},"generated":{"line":2,"column":643}},{"source":"../src/TransportU2F.js","name":"from","original":{"line":39,"column":27},"generated":{"line":2,"column":645}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":40,"column":4},"generated":{"line":2,"column":650}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":41,"column":4},"generated":{"line":2,"column":717}},{"source":"../src/TransportU2F.js","name":"signRequest","original":{"line":43,"column":8},"generated":{"line":2,"column":724}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":43,"column":22},"generated":{"line":2,"column":726}},{"source":"../src/TransportU2F.js","name":"version","original":{"line":44,"column":4},"generated":{"line":2,"column":727}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":44,"column":13},"generated":{"line":2,"column":735}},{"source":"../src/TransportU2F.js","name":"keyHandle","original":{"line":45,"column":4},"generated":{"line":2,"column":744}},{"source":"../src/TransportU2F.js","name":"webSafe64","original":{"line":45,"column":15},"generated":{"line":2,"column":754}},{"source":"../src/TransportU2F.js","name":"keyHandle","original":{"line":45,"column":25},"generated":{"line":2,"column":756}},{"source":"../src/TransportU2F.js","name":"toString","original":{"line":45,"column":35},"generated":{"line":2,"column":758}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":45,"column":44},"generated":{"line":2,"column":767}},{"source":"../src/TransportU2F.js","name":"challenge","original":{"line":46,"column":4},"generated":{"line":2,"column":778}},{"source":"../src/TransportU2F.js","name":"webSafe64","original":{"line":46,"column":15},"generated":{"line":2,"column":788}},{"source":"../src/TransportU2F.js","name":"challenge","original":{"line":46,"column":25},"generated":{"line":2,"column":790}},{"source":"../src/TransportU2F.js","name":"toString","original":{"line":46,"column":35},"generated":{"line":2,"column":792}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":46,"column":44},"generated":{"line":2,"column":801}},{"source":"../src/TransportU2F.js","name":"appId","original":{"line":47,"column":4},"generated":{"line":2,"column":812}},{"source":"../src/TransportU2F.js","name":"location","original":{"line":47,"column":11},"generated":{"line":2,"column":818}},{"source":"../src/TransportU2F.js","name":"origin","original":{"line":47,"column":20},"generated":{"line":2,"column":827}},{"source":"../src/TransportU2F.js","name":"sign","original":{"line":50,"column":9},"generated":{"line":2,"column":835}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":49,"column":6},"generated":{"line":2,"column":842}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":49,"column":6},"generated":{"line":2,"column":844}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":49,"column":6},"generated":{"line":2,"column":846}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":49,"column":6},"generated":{"line":2,"column":851}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":49,"column":14},"generated":{"line":2,"column":858}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":49,"column":22},"generated":{"line":2,"column":864}},{"source":"../src/TransportU2F.js","name":"toString","original":{"line":49,"column":27},"generated":{"line":2,"column":866}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":49,"column":36},"generated":{"line":2,"column":875}},{"source":"../src/TransportU2F.js","name":"sign","original":{"line":50,"column":9},"generated":{"line":2,"column":884}},{"source":"../src/TransportU2F.js","name":"signRequest","original":{"line":50,"column":14},"generated":{"line":2,"column":886}},{"source":"../src/TransportU2F.js","name":"signRequest","original":{"line":50,"column":14},"generated":{"line":2,"column":888}},{"source":"../src/TransportU2F.js","name":"signRequest","original":{"line":50,"column":14},"generated":{"line":2,"column":894}},{"source":"../src/TransportU2F.js","name":"timeoutMillis","original":{"line":50,"column":27},"generated":{"line":2,"column":896}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":50,"column":43},"generated":{"line":2,"column":898}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":50,"column":49},"generated":{"line":2,"column":903}},{"source":"../src/TransportU2F.js","name":"response","original":{"line":50,"column":55},"generated":{"line":2,"column":908}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":51,"column":10},"generated":{"line":2,"column":912}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":51,"column":10},"generated":{"line":2,"column":918}},{"source":"../src/TransportU2F.js","name":"signatureData","original":{"line":51,"column":12},"generated":{"line":2,"column":932}},{"source":"../src/TransportU2F.js","name":"response","original":{"line":51,"column":30},"generated":{"line":2,"column":935}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":52,"column":8},"generated":{"line":2,"column":937}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":52,"column":33},"generated":{"line":2,"column":940}},{"source":"../src/TransportU2F.js","name":"signatureData","original":{"line":52,"column":15},"generated":{"line":2,"column":957}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":52,"column":43},"generated":{"line":2,"column":959}},{"source":"../src/TransportU2F.js","name":"data","original":{"line":53,"column":12},"generated":{"line":2,"column":960}},{"source":"../src/TransportU2F.js","name":"data","original":{"line":53,"column":12},"generated":{"line":2,"column":966}},{"source":"../src/TransportU2F.js","name":"Buffer","original":{"line":53,"column":19},"generated":{"line":2,"column":968}},{"source":"../src/TransportU2F.js","name":"from","original":{"line":53,"column":26},"generated":{"line":2,"column":970}},{"source":"../src/TransportU2F.js","name":"normal64","original":{"line":53,"column":31},"generated":{"line":2,"column":975}},{"source":"../src/TransportU2F.js","name":"signatureData","original":{"line":53,"column":40},"generated":{"line":2,"column":977}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":53,"column":56},"generated":{"line":2,"column":980}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":54,"column":10},"generated":{"line":2,"column":990}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":54,"column":10},"generated":{"line":2,"column":994}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":61,"column":13},"generated":{"line":2,"column":996}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":58,"column":8},"generated":{"line":2,"column":1003}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":55,"column":11},"generated":{"line":2,"column":1005}},{"source":"../src/TransportU2F.js","name":"data","original":{"line":58,"column":17},"generated":{"line":2,"column":1007}},{"source":"../src/TransportU2F.js","name":"slice","original":{"line":58,"column":22},"generated":{"line":2,"column":1009}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":58,"column":28},"generated":{"line":2,"column":1015}},{"source":"../src/TransportU2F.js","name":"data","original":{"line":56,"column":17},"generated":{"line":2,"column":1018}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":60,"column":10},"generated":{"line":2,"column":1021}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":60,"column":10},"generated":{"line":2,"column":1023}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":60,"column":10},"generated":{"line":2,"column":1025}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":60,"column":10},"generated":{"line":2,"column":1030}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":60,"column":18},"generated":{"line":2,"column":1037}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":60,"column":26},"generated":{"line":2,"column":1043}},{"source":"../src/TransportU2F.js","name":"toString","original":{"line":60,"column":33},"generated":{"line":2,"column":1045}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":60,"column":42},"generated":{"line":2,"column":1054}},{"source":"../src/TransportU2F.js","name":"result","original":{"line":61,"column":13},"generated":{"line":2,"column":1062}},{"source":"../src/TransportU2F.js","name":"response","original":{"line":63,"column":12},"generated":{"line":2,"column":1064}},{"source":"../src/TransportU2F.js","name":"response","original":{"line":63,"column":12},"generated":{"line":2,"column":1070}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":68,"column":0},"generated":{"line":2,"column":1074}},{"source":"../src/TransportU2F.js","name":"transportInstances","original":{"line":68,"column":4},"generated":{"line":2,"column":1078}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":68,"column":25},"generated":{"line":2,"column":1080}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":70,"column":0},"generated":{"line":2,"column":1083}},{"source":"../src/TransportU2F.js","name":"emitDisconnect","original":{"line":70,"column":9},"generated":{"line":2,"column":1092}},{"source":"../src/TransportU2F.js","name":"transportInstances","original":{"line":71,"column":2},"generated":{"line":2,"column":1096}},{"source":"../src/TransportU2F.js","name":"forEach","original":{"line":71,"column":21},"generated":{"line":2,"column":1098}},{"source":"../src/TransportU2F.js","name":"t","original":{"line":71,"column":30},"generated":{"line":2,"column":1106}},{"source":"../src/TransportU2F.js","name":"t","original":{"line":71,"column":36},"generated":{"line":2,"column":1109}},{"source":"../src/TransportU2F.js","name":"emit","original":{"line":71,"column":38},"generated":{"line":2,"column":1111}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":71,"column":43},"generated":{"line":2,"column":1116}},{"source":"../src/TransportU2F.js","name":"transportInstances","original":{"line":72,"column":2},"generated":{"line":2,"column":1131}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":72,"column":23},"generated":{"line":2,"column":1133}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":75,"column":0},"generated":{"line":2,"column":1136}},{"source":"../src/TransportU2F.js","name":"isTimeoutU2FError","original":{"line":75,"column":9},"generated":{"line":2,"column":1145}},{"source":"../src/TransportU2F.js","name":"u2fError","original":{"line":75,"column":27},"generated":{"line":2,"column":1147}},{"source":"../src/TransportU2F.js","name":"u2fError","original":{"line":76,"column":9},"generated":{"line":2,"column":1150}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":76,"column":36},"generated":{"line":2,"column":1157}},{"source":"../src/TransportU2F.js","name":"u2fError","original":{"line":76,"column":9},"generated":{"line":2,"column":1161}},{"source":"../src/TransportU2F.js","name":"metaData","original":{"line":76,"column":18},"generated":{"line":2,"column":1163}},{"source":"../src/TransportU2F.js","name":"code","original":{"line":76,"column":27},"generated":{"line":2,"column":1172}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":86,"column":15},"generated":{"line":2,"column":1177}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1183}},{"source":"../src/TransportU2F.js","name":"Transport","original":{"line":86,"column":42},"generated":{"line":2,"column":1193}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":86,"column":15},"generated":{"line":2,"column":1195}},{"source":"../src/TransportU2F.js","name":"open","original":{"line":129,"column":15},"generated":{"line":2,"column":1203}},{"source":"../src/TransportU2F.js","name":"_","original":{"line":129,"column":20},"generated":{"line":2,"column":1221}},{"source":"../src/TransportU2F.js","name":"_openTimeout","original":{"line":129,"column":26},"generated":{"line":2,"column":1223}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":129,"column":50},"generated":{"line":2,"column":1225}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":130,"column":11},"generated":{"line":2,"column":1230}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":130,"column":11},"generated":{"line":2,"column":1237}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":130,"column":15},"generated":{"line":2,"column":1241}},{"source":"../src/TransportU2F.js","name":"constructor","original":{"line":133,"column":2},"generated":{"line":2,"column":1243}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":134,"column":4},"generated":{"line":2,"column":1257}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":122,"column":2},"generated":{"line":2,"column":1265}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":122,"column":2},"generated":{"line":2,"column":1270}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":133,"column":16},"generated":{"line":2,"column":1287}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":124,"column":2},"generated":{"line":2,"column":1289}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":124,"column":2},"generated":{"line":2,"column":1294}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":124,"column":20},"generated":{"line":2,"column":1302}},{"source":"../src/TransportU2F.js","name":"transportInstances","original":{"line":135,"column":4},"generated":{"line":2,"column":1304}},{"source":"../src/TransportU2F.js","name":"push","original":{"line":135,"column":23},"generated":{"line":2,"column":1306}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":135,"column":28},"generated":{"line":2,"column":1311}},{"source":"../src/TransportU2F.js","name":"exchange","original":{"line":143,"column":8},"generated":{"line":2,"column":1317}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":143,"column":17},"generated":{"line":2,"column":1332}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":144,"column":8},"generated":{"line":2,"column":1335}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":145,"column":13},"generated":{"line":2,"column":1339}},{"source":"../src/TransportU2F.js","name":"attemptExchange","original":{"line":145,"column":19},"generated":{"line":2,"column":1352}},{"source":"../src/TransportU2F.js","name":"apdu","original":{"line":146,"column":8},"generated":{"line":2,"column":1354}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":147,"column":8},"generated":{"line":2,"column":1356}},{"source":"../src/TransportU2F.js","name":"exchangeTimeout","original":{"line":147,"column":13},"generated":{"line":2,"column":1361}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":148,"column":8},"generated":{"line":2,"column":1377}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":148,"column":13},"generated":{"line":2,"column":1382}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":149,"column":8},"generated":{"line":2,"column":1394}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":149,"column":13},"generated":{"line":2,"column":1399}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":151,"column":6},"generated":{"line":2,"column":1407}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":151,"column":13},"generated":{"line":2,"column":1413}},{"source":"../src/TransportU2F.js","name":"isU2FError","original":{"line":153,"column":10},"generated":{"line":2,"column":1416}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":152,"column":47},"generated":{"line":2,"column":1421}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":152,"column":32},"generated":{"line":2,"column":1438}},{"source":"../src/TransportU2F.js","name":"metaData","original":{"line":152,"column":34},"generated":{"line":2,"column":1440}},{"source":"../src/TransportU2F.js","name":"isTimeoutU2FError","original":{"line":154,"column":12},"generated":{"line":2,"column":1450}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":154,"column":30},"generated":{"line":2,"column":1452}},{"source":"../src/TransportU2F.js","name":"emitDisconnect","original":{"line":155,"column":10},"generated":{"line":2,"column":1456}},{"source":"../src/TransportU2F.js","name":"wrapU2FTransportError","original":{"line":158,"column":14},"generated":{"line":2,"column":1460}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":159,"column":10},"generated":{"line":2,"column":1462}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":160,"column":10},"generated":{"line":2,"column":1464}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":160,"column":54},"generated":{"line":2,"column":1506}},{"source":"../src/TransportU2F.js","name":"metaData","original":{"line":160,"column":56},"generated":{"line":2,"column":1508}},{"source":"../src/TransportU2F.js","name":"type","original":{"line":160,"column":65},"generated":{"line":2,"column":1517}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":161,"column":10},"generated":{"line":2,"column":1522}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":161,"column":19},"generated":{"line":2,"column":1529}},{"source":"../src/TransportU2F.js","name":"metaData","original":{"line":161,"column":21},"generated":{"line":2,"column":1531}},{"source":"../src/TransportU2F.js","name":"code","original":{"line":161,"column":30},"generated":{"line":2,"column":1540}},{"source":"../src/TransportU2F.js","name":"e","original":{"line":164,"column":14},"generated":{"line":2,"column":1547}},{"source":"../src/TransportU2F.js","name":"setScrambleKey","original":{"line":171,"column":2},"generated":{"line":2,"column":1550}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":171,"column":17},"generated":{"line":2,"column":1565}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":172,"column":9},"generated":{"line":2,"column":1568}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":172,"column":9},"generated":{"line":2,"column":1573}},{"source":"../src/TransportU2F.js","name":"Buffer","original":{"line":172,"column":23},"generated":{"line":2,"column":1585}},{"source":"../src/TransportU2F.js","name":"from","original":{"line":172,"column":30},"generated":{"line":2,"column":1587}},{"source":"../src/TransportU2F.js","name":"scrambleKey","original":{"line":172,"column":35},"generated":{"line":2,"column":1592}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":172,"column":48},"generated":{"line":2,"column":1594}},{"source":"../src/TransportU2F.js","name":"setUnwrap","original":{"line":177,"column":2},"generated":{"line":2,"column":1603}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":177,"column":12},"generated":{"line":2,"column":1613}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":178,"column":9},"generated":{"line":2,"column":1616}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":178,"column":9},"generated":{"line":2,"column":1621}},{"source":"../src/TransportU2F.js","name":"unwrap","original":{"line":178,"column":18},"generated":{"line":2,"column":1628}},{"source":"../src/TransportU2F.js","name":"close","original":{"line":181,"column":2},"generated":{"line":2,"column":1630}},{"source":"../src/TransportU2F.js","name":"Promise","original":{"line":183,"column":11},"generated":{"line":2,"column":1638}},{"source":"../src/TransportU2F.js","name":"Promise","original":{"line":183,"column":11},"generated":{"line":2,"column":1645}},{"source":"../src/TransportU2F.js","name":"resolve","original":{"line":183,"column":19},"generated":{"line":2,"column":1653}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1664}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1672}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1680}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1682}},{"source":"../src/TransportU2F.js","name":"isSupported","original":{"line":87,"column":9},"generated":{"line":2,"column":1684}},{"source":"../src/TransportU2F.js","name":"isSupported","original":{"line":87,"column":23},"generated":{"line":2,"column":1696}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1698}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1710}},{"source":"../src/TransportU2F.js","name":"list","original":{"line":91,"column":9},"generated":{"line":2,"column":1712}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":91,"column":16},"generated":{"line":2,"column":1717}},{"source":"../src/TransportU2F.js","name":"isSupported","original":{"line":93,"column":4},"generated":{"line":2,"column":1723}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":93,"column":18},"generated":{"line":2,"column":1725}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":93,"column":18},"generated":{"line":2,"column":1727}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":93,"column":18},"generated":{"line":2,"column":1742}},{"source":"../src/TransportU2F.js","name":"supported","original":{"line":93,"column":24},"generated":{"line":2,"column":1747}},{"source":"../src/TransportU2F.js","name":"supported","original":{"line":93,"column":39},"generated":{"line":2,"column":1750}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":93,"column":51},"generated":{"line":2,"column":1752}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":93,"column":52},"generated":{"line":2,"column":1753}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":93,"column":60},"generated":{"line":2,"column":1759}},{"source":"../src/TransportU2F.js","name":"TransportU2F","original":{"line":86,"column":21},"generated":{"line":2,"column":1764}},{"source":"../src/TransportU2F.js","name":"listen","original":{"line":97,"column":9},"generated":{"line":2,"column":1766}},{"source":"../src/TransportU2F.js","name":"observer","original":{"line":97,"column":19},"generated":{"line":2,"column":1773}},{"source":"../src/TransportU2F.js","name":"observer","original":{"line":97,"column":19},"generated":{"line":2,"column":1774}},{"source":"../src/TransportU2F.js","name":"unsubscribed","original":{"line":98,"column":8},"generated":{"line":2,"column":1778}},{"source":"../src/TransportU2F.js","name":"unsubscribed","original":{"line":98,"column":8},"generated":{"line":2,"column":1782}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":98,"column":23},"generated":{"line":2,"column":1785}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":115,"column":11},"generated":{"line":2,"column":1787}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":99,"column":18},"generated":{"line":2,"column":1794}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":99,"column":18},"generated":{"line":2,"column":1796}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":99,"column":18},"generated":{"line":2,"column":1798}},{"source":"../src/TransportU2F.js","name":"then","original":{"line":99,"column":18},"generated":{"line":2,"column":1813}},{"source":"../src/TransportU2F.js","name":"supported","original":{"line":99,"column":24},"generated":{"line":2,"column":1818}},{"source":"../src/TransportU2F.js","name":"unsubscribed","original":{"line":100,"column":10},"generated":{"line":2,"column":1822}},{"source":"../src/TransportU2F.js","name":"supported","original":{"line":101,"column":10},"generated":{"line":2,"column":1826}},{"source":"../src/TransportU2F.js","name":"observer","original":{"line":102,"column":8},"generated":{"line":2,"column":1829}},{"source":"../src/TransportU2F.js","name":"next","original":{"line":102,"column":17},"generated":{"line":2,"column":1831}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":102,"column":22},"generated":{"line":2,"column":1836}},{"source":"../src/TransportU2F.js","name":"type","original":{"line":102,"column":24},"generated":{"line":2,"column":1837}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":102,"column":30},"generated":{"line":2,"column":1842}},{"source":"../src/TransportU2F.js","name":"descriptor","original":{"line":102,"column":37},"generated":{"line":2,"column":1848}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":102,"column":49},"generated":{"line":2,"column":1859}},{"source":"../src/TransportU2F.js","name":"observer","original":{"line":103,"column":8},"generated":{"line":2,"column":1866}},{"source":"../src/TransportU2F.js","name":"complete","original":{"line":103,"column":17},"generated":{"line":2,"column":1868}},{"source":"../src/TransportU2F.js","name":"observer","original":{"line":105,"column":8},"generated":{"line":2,"column":1880}},{"source":"../src/TransportU2F.js","name":"error","original":{"line":105,"column":17},"generated":{"line":2,"column":1882}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":106,"column":10},"generated":{"line":2,"column":1888}},{"source":"../src/TransportU2F.js","name":"TransportError","original":{"line":106,"column":14},"generated":{"line":2,"column":1892}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":106,"column":10},"generated":{"line":2,"column":1894}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":107,"column":12},"generated":{"line":2,"column":1909}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":110,"column":12},"generated":{"line":2,"column":2056}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":115,"column":11},"generated":{"line":2,"column":2079}},{"source":"../src/TransportU2F.js","name":"unsubscribe","original":{"line":116,"column":6},"generated":{"line":2,"column":2080}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":116,"column":19},"generated":{"line":2,"column":2092}},{"source":"../src/TransportU2F.js","name":"unsubscribed","original":{"line":117,"column":8},"generated":{"line":2,"column":2097}},{"source":"../src/TransportU2F.js","name":null,"original":{"line":117,"column":23},"generated":{"line":2,"column":2100}}],"sources":{"../src/TransportU2F.js":"//@flow\n\nimport { sign, isSupported } from \"u2f-api\";\nimport Transport from \"@ledgerhq/hw-transport\";\nimport { log } from \"@ledgerhq/logs\";\nimport { TransportError } from \"@ledgerhq/errors\";\n\nfunction wrapU2FTransportError(originalError, message, id) {\n  const err = new TransportError(message, id);\n  // $FlowFixMe\n  err.originalError = originalError;\n  return err;\n}\n\nfunction wrapApdu(apdu: Buffer, key: Buffer) {\n  const result = Buffer.alloc(apdu.length);\n  for (let i = 0; i < apdu.length; i++) {\n    result[i] = apdu[i] ^ key[i % key.length];\n  }\n  return result;\n}\n\n// Convert from normal to web-safe, strip trailing \"=\"s\nconst webSafe64 = (base64: string) =>\n  base64.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n\n// Convert from web-safe to normal, add trailing \"=\"s\nconst normal64 = (base64: string) =>\n  base64.replace(/-/g, \"+\").replace(/_/g, \"/\") +\n  \"==\".substring(0, (3 * base64.length) % 4);\n\nfunction attemptExchange(\n  apdu: Buffer,\n  timeoutMillis: number,\n  scrambleKey: Buffer,\n  unwrap: boolean\n): Promise<Buffer> {\n  const keyHandle = wrapApdu(apdu, scrambleKey);\n  const challenge = Buffer.from(\n    \"0000000000000000000000000000000000000000000000000000000000000000\",\n    \"hex\"\n  );\n  const signRequest = {\n    version: \"U2F_V2\",\n    keyHandle: webSafe64(keyHandle.toString(\"base64\")),\n    challenge: webSafe64(challenge.toString(\"base64\")),\n    appId: location.origin,\n  };\n  log(\"apdu\", \"=> \" + apdu.toString(\"hex\"));\n  return sign(signRequest, timeoutMillis / 1000).then((response) => {\n    const { signatureData } = response;\n    if (typeof signatureData === \"string\") {\n      const data = Buffer.from(normal64(signatureData), \"base64\");\n      let result;\n      if (!unwrap) {\n        result = data;\n      } else {\n        result = data.slice(5);\n      }\n      log(\"apdu\", \"<= \" + result.toString(\"hex\"));\n      return result;\n    } else {\n      throw response;\n    }\n  });\n}\n\nlet transportInstances = [];\n\nfunction emitDisconnect() {\n  transportInstances.forEach((t) => t.emit(\"disconnect\"));\n  transportInstances = [];\n}\n\nfunction isTimeoutU2FError(u2fError) {\n  return u2fError.metaData.code === 5;\n}\n\n/**\n * U2F web Transport implementation\n * @example\n * import TransportU2F from \"@ledgerhq/hw-transport-u2f\";\n * ...\n * TransportU2F.create().then(transport => ...)\n */\nexport default class TransportU2F extends Transport<null> {\n  static isSupported = isSupported;\n\n  /*\n   */\n  static list = (): * =>\n    // this transport is not discoverable but we are going to guess if it is here with isSupported()\n    isSupported().then((supported) => (supported ? [null] : []));\n\n  /*\n   */\n  static listen = (observer: *) => {\n    let unsubscribed = false;\n    isSupported().then((supported) => {\n      if (unsubscribed) return;\n      if (supported) {\n        observer.next({ type: \"add\", descriptor: null });\n        observer.complete();\n      } else {\n        observer.error(\n          new TransportError(\n            \"U2F browser support is needed for Ledger. \" +\n              \"Please use Chrome, Opera or Firefox with a U2F extension. \" +\n              \"Also make sure you're on an HTTPS connection\",\n            \"U2FNotSupported\"\n          )\n        );\n      }\n    });\n    return {\n      unsubscribe: () => {\n        unsubscribed = true;\n      },\n    };\n  };\n\n  scrambleKey: Buffer;\n\n  unwrap: boolean = true;\n\n  /**\n   * static function to create a new Transport from a connected Ledger device discoverable via U2F (browser support)\n   */\n  static async open(_: *, _openTimeout?: number = 5000): Promise<TransportU2F> {\n    return new TransportU2F();\n  }\n\n  constructor() {\n    super();\n    transportInstances.push(this);\n  }\n\n  /**\n   * Exchange with the device using APDU protocol.\n   * @param apdu\n   * @returns a promise of apdu response\n   */\n  async exchange(apdu: Buffer): Promise<Buffer> {\n    try {\n      return await attemptExchange(\n        apdu,\n        this.exchangeTimeout,\n        this.scrambleKey,\n        this.unwrap\n      );\n    } catch (e) {\n      const isU2FError = typeof e.metaData === \"object\";\n      if (isU2FError) {\n        if (isTimeoutU2FError(e)) {\n          emitDisconnect();\n        }\n        // the wrapping make error more usable and \"printable\" to the end user.\n        throw wrapU2FTransportError(\n          e,\n          \"Failed to sign with Ledger device: U2F \" + e.metaData.type,\n          \"U2F_\" + e.metaData.code\n        );\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   */\n  setScrambleKey(scrambleKey: string) {\n    this.scrambleKey = Buffer.from(scrambleKey, \"ascii\");\n  }\n\n  /**\n   */\n  setUnwrap(unwrap: boolean) {\n    this.unwrap = unwrap;\n  }\n\n  close(): Promise<void> {\n    // u2f have no way to clean things up\n    return Promise.resolve();\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"e65d8255da5036954929f2e4bab55a39","cacheData":{"env":{}}}