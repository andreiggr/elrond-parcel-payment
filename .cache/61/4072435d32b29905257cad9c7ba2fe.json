{"id":"node_modules/@elrondnetwork/erdjs/out/asyncTimer.js","dependencies":[{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/asyncTimer.js.map","includedInParent":true,"mtime":1647170304892},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/package.json","includedInParent":true,"mtime":1647174146392},{"name":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/package.json","includedInParent":true,"mtime":1647170304850},{"name":"./errors","loc":{"line":24,"column":25,"index":1040},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/asyncTimer.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/errors.js"},{"name":"./logger","loc":{"line":25,"column":25,"index":1078},"parent":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/asyncTimer.js","resolved":"/Users/mac/code/work/bitmarket/elrond-parcel/node_modules/@elrondnetwork/erdjs/out/logger.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsyncTimer = void 0;\nconst errors = __importStar(require(\"./errors\"));\nconst errors_1 = require(\"./errors\");\nconst logger_1 = require(\"./logger\");\n/*\n * AsyncTimer is an async-friendly abstraction that wraps JavaScript's setTimeout() and clearTimeout().\n */\nclass AsyncTimer {\n    /**\n     * Creates an AsyncTimer.\n     */\n    constructor(name) {\n        this.timeoutHandle = null;\n        this.rejectionFunc = null;\n        this.name = name;\n        this.correlationTag = 0;\n    }\n    /**\n     * Starts the timer.\n     * @param timeout The time (in milliseconds) to wait until resolving the promise.\n     */\n    start(timeout) {\n        if (this.timeoutHandle) {\n            throw new errors.ErrAsyncTimerAlreadyRunning();\n        }\n        this.correlationTag++;\n        logger_1.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].start()`);\n        return new Promise((resolve, reject) => {\n            this.rejectionFunc = reject;\n            let timeoutCallback = () => {\n                this.rejectionFunc = null;\n                this.stop();\n                resolve();\n            };\n            this.timeoutHandle = setTimeout(timeoutCallback, timeout);\n        });\n    }\n    /**\n     * Aborts the timer: rejects the promise (if any) and stops the timer.\n     */\n    abort() {\n        logger_1.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].abort()`);\n        if (this.rejectionFunc) {\n            this.rejectionFunc(new errors_1.ErrAsyncTimerAborted());\n            this.rejectionFunc = null;\n        }\n        this.stop();\n    }\n    /**\n     * Stops the timer.\n     */\n    stop() {\n        if (this.isStopped()) {\n            return;\n        }\n        logger_1.Logger.trace(`AsyncTimer[${this.name}'${this.correlationTag}].stop()`);\n        if (this.timeoutHandle) {\n            clearTimeout(this.timeoutHandle);\n            this.timeoutHandle = null;\n        }\n    }\n    /**\n     * Returns whether the timer is stopped.\n     */\n    isStopped() {\n        return this.timeoutHandle ? false : true;\n    }\n}\nexports.AsyncTimer = AsyncTimer;\n"},"sourceMaps":{"js":{"version":3,"file":"asyncTimer.js","sourceRoot":"","sources":["../src/asyncTimer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,iDAAmC;AACnC,qCAAgD;AAChD,qCAAkC;AAElC;;GAEG;AACH,MAAa,UAAU;IAMnB;;OAEG;IACH,YAAY,IAAY;QAPhB,kBAAa,GAAQ,IAAI,CAAC;QAC1B,kBAAa,GAAQ,IAAI,CAAC;QAO9B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG;IACI,KAAK,CAAC,OAAe;QACxB,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,CAAC;SAClD;QAED,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,eAAM,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,cAAc,WAAW,CAAC,CAAC;QAExE,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACzC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;YAE5B,IAAI,eAAe,GAAG,GAAG,EAAE;gBACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,IAAI,CAAC,IAAI,EAAE,CAAC;gBACZ,OAAO,EAAE,CAAC;YACd,CAAC,CAAC;YAEF,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;OAEG;IACI,KAAK;QACR,eAAM,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,cAAc,WAAW,CAAC,CAAC;QAExE,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,IAAI,CAAC,aAAa,CAAC,IAAI,6BAAoB,EAAE,CAAC,CAAC;YAC/C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;SAC7B;QAED,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAED;;OAEG;IACI,IAAI;QACP,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAClB,OAAO;SACV;QAED,eAAM,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,cAAc,UAAU,CAAC,CAAC;QAEvE,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YACjC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;SAC7B;IACL,CAAC;IAED;;OAEG;IACI,SAAS;QACZ,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;IAC7C,CAAC;CACJ;AA3ED,gCA2EC","sourcesContent":[null]}},"error":null,"hash":"ec863818858941092ddf6fd056d231f3","cacheData":{"env":{}}}